{"version":3,"file":"build-wda.js","names":["DEFAULT_SIM_NAME","build","xcodeVersion","getAndCheckXcodeVersion","iosVersion","getAndCheckIosSdkVersion","deviceName","translateDeviceName","device","getExistingSim","platformVersion","wda","WebDriverAgent","iosSdkVersion","showXcodeLog","xcodebuild","start","require","main","module","asyncify"],"sources":["../../lib/build-wda.js"],"sourcesContent":["import { WebDriverAgent } from 'appium-webdriveragent';\nimport { translateDeviceName, getAndCheckXcodeVersion, getAndCheckIosSdkVersion } from './utils';\nimport { getExistingSim } from './simulator-management';\nimport { asyncify } from 'asyncbox';\n\nconst DEFAULT_SIM_NAME = 'iPhone 12';\n\n// TODO: allow passing in all the various build params as CLI args\nasync function build () {\n  const xcodeVersion = await getAndCheckXcodeVersion();\n  const iosVersion = await getAndCheckIosSdkVersion();\n  const deviceName = translateDeviceName(iosVersion, DEFAULT_SIM_NAME);\n  const device = await getExistingSim({\n    platformVersion: iosVersion,\n    deviceName\n  });\n  const wda = new WebDriverAgent(xcodeVersion, {\n    iosSdkVersion: iosVersion,\n    platformVersion: iosVersion,\n    showXcodeLog: true,\n    device,\n  });\n  await wda.xcodebuild.start(true);\n}\n\nif (require.main === module) {\n  asyncify(build);\n}\n\nexport default build;\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AAEA,MAAMA,gBAAgB,GAAG,WAAW;AAGpC,eAAeC,KAAK,GAAI;EACtB,MAAMC,YAAY,GAAG,MAAM,IAAAC,8BAAuB,GAAE;EACpD,MAAMC,UAAU,GAAG,MAAM,IAAAC,+BAAwB,GAAE;EACnD,MAAMC,UAAU,GAAG,IAAAC,0BAAmB,EAACH,UAAU,EAAEJ,gBAAgB,CAAC;EACpE,MAAMQ,MAAM,GAAG,MAAM,IAAAC,mCAAc,EAAC;IAClCC,eAAe,EAAEN,UAAU;IAC3BE;EACF,CAAC,CAAC;EACF,MAAMK,GAAG,GAAG,IAAIC,oCAAc,CAACV,YAAY,EAAE;IAC3CW,aAAa,EAAET,UAAU;IACzBM,eAAe,EAAEN,UAAU;IAC3BU,YAAY,EAAE,IAAI;IAClBN;EACF,CAAC,CAAC;EACF,MAAMG,GAAG,CAACI,UAAU,CAACC,KAAK,CAAC,IAAI,CAAC;AAClC;AAEA,IAAIC,OAAO,CAACC,IAAI,KAAKC,MAAM,EAAE;EAC3B,IAAAC,kBAAQ,EAACnB,KAAK,CAAC;AACjB;AAAC,eAEcA,KAAK;AAAA"}