"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.IOSSimulatorLog = void 0;
require("source-map-support/register");
var _lodash = _interopRequireDefault(require("lodash"));
var _iosLog = require("./ios-log");
var _support = require("appium/support");
var _teen_process = require("teen_process");
const log = _support.logger.getLogger('IOSSimulatorLog');
const START_TIMEOUT = 10000;
class IOSSimulatorLog extends _iosLog.IOSLog {
  constructor({
    sim,
    showLogs,
    xcodeVersion,
    iosSimulatorLogsPredicate
  }) {
    super();
    this.sim = sim;
    this.showLogs = !!showLogs;
    this.xcodeVersion = xcodeVersion;
    this.predicate = iosSimulatorLogsPredicate;
    this.proc = null;
  }
  async startCapture() {
    if (_lodash.default.isUndefined(this.sim.udid)) {
      throw new Error(`Log capture requires a sim udid`);
    }
    if (!(await this.sim.isRunning())) {
      throw new Error(`iOS Simulator with udid '${this.sim.udid}' is not running`);
    }
    const spawnArgs = ['log', 'stream', '--style', 'compact'];
    if (this.predicate) {
      spawnArgs.push('--predicate', this.predicate);
    }
    log.debug(`Starting log capture for iOS Simulator with udid '${this.sim.udid}' ` + `using simctl`);
    try {
      await (0, _teen_process.exec)('pkill', ['-f', [this.sim.udid, ...spawnArgs].join(' ')]);
    } catch (ign) {}
    try {
      this.proc = await this.sim.simctl.spawnSubProcess(spawnArgs);
      await this.finishStartingLogCapture();
    } catch (e) {
      throw new Error(`Simulator log capture failed. Original error: ${e.message}`);
    }
  }
  async finishStartingLogCapture() {
    if (!this.proc) {
      log.errorAndThrow('Could not capture simulator log');
    }
    let firstLine = true;
    let logRow = '';
    this.proc.on('output', (stdout, stderr) => {
      if (stdout) {
        if (firstLine) {
          if (stdout.endsWith('\n')) {
            firstLine = false;
          }
        } else {
          logRow += stdout;
          if (stdout.endsWith('\n')) {
            this.onOutput(logRow);
            logRow = '';
          }
        }
      }
      if (stderr) {
        this.onOutput(logRow, 'STDERR');
      }
    });
    let sd = (stdout, stderr) => {
      if (/execvp\(\)/.test(stderr)) {
        throw new Error('iOS log capture process failed to start');
      }
      return stdout || stderr;
    };
    await this.proc.start(sd, START_TIMEOUT);
  }
  async stopCapture() {
    if (!this.proc) {
      return;
    }
    await this.killLogSubProcess();
    this.proc = null;
  }
  async killLogSubProcess() {
    if (!this.proc.isRunning) {
      return;
    }
    log.debug('Stopping iOS log capture');
    try {
      await this.proc.stop('SIGTERM', 1000);
    } catch (e) {
      if (!this.proc.isRunning) {
        return;
      }
      log.warn('Cannot stop log capture process. Sending SIGKILL');
      await this.proc.stop('SIGKILL');
    }
  }
  get isCapturing() {
    return this.proc && this.proc.isRunning;
  }
  onOutput(logRow, prefix = '') {
    const logs = _lodash.default.cloneDeep(logRow.split('\n'));
    for (const logLine of logs) {
      if (!logLine) continue;
      this.broadcast(logLine);
      if (this.showLogs) {
        const space = prefix.length > 0 ? ' ' : '';
        log.info(`[IOS_SYSLOG_ROW${space}${prefix}] ${logLine}`);
      }
    }
  }
}
exports.IOSSimulatorLog = IOSSimulatorLog;
var _default = IOSSimulatorLog;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2ciLCJsb2dnZXIiLCJnZXRMb2dnZXIiLCJTVEFSVF9USU1FT1VUIiwiSU9TU2ltdWxhdG9yTG9nIiwiSU9TTG9nIiwiY29uc3RydWN0b3IiLCJzaW0iLCJzaG93TG9ncyIsInhjb2RlVmVyc2lvbiIsImlvc1NpbXVsYXRvckxvZ3NQcmVkaWNhdGUiLCJwcmVkaWNhdGUiLCJwcm9jIiwic3RhcnRDYXB0dXJlIiwiXyIsImlzVW5kZWZpbmVkIiwidWRpZCIsIkVycm9yIiwiaXNSdW5uaW5nIiwic3Bhd25BcmdzIiwicHVzaCIsImRlYnVnIiwiZXhlYyIsImpvaW4iLCJpZ24iLCJzaW1jdGwiLCJzcGF3blN1YlByb2Nlc3MiLCJmaW5pc2hTdGFydGluZ0xvZ0NhcHR1cmUiLCJlIiwibWVzc2FnZSIsImVycm9yQW5kVGhyb3ciLCJmaXJzdExpbmUiLCJsb2dSb3ciLCJvbiIsInN0ZG91dCIsInN0ZGVyciIsImVuZHNXaXRoIiwib25PdXRwdXQiLCJzZCIsInRlc3QiLCJzdGFydCIsInN0b3BDYXB0dXJlIiwia2lsbExvZ1N1YlByb2Nlc3MiLCJzdG9wIiwid2FybiIsImlzQ2FwdHVyaW5nIiwicHJlZml4IiwibG9ncyIsImNsb25lRGVlcCIsInNwbGl0IiwibG9nTGluZSIsImJyb2FkY2FzdCIsInNwYWNlIiwibGVuZ3RoIiwiaW5mbyJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9kZXZpY2UtbG9nL2lvcy1zaW11bGF0b3ItbG9nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBJT1NMb2cgfSBmcm9tICcuL2lvcy1sb2cnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnYXBwaXVtL3N1cHBvcnQnO1xuaW1wb3J0IHsgZXhlYyB9IGZyb20gJ3RlZW5fcHJvY2Vzcyc7XG5cbmNvbnN0IGxvZyA9IGxvZ2dlci5nZXRMb2dnZXIoJ0lPU1NpbXVsYXRvckxvZycpO1xuXG5jb25zdCBTVEFSVF9USU1FT1VUID0gMTAwMDA7XG5cbmNsYXNzIElPU1NpbXVsYXRvckxvZyBleHRlbmRzIElPU0xvZyB7XG4gIGNvbnN0cnVjdG9yICh7c2ltLCBzaG93TG9ncywgeGNvZGVWZXJzaW9uLCBpb3NTaW11bGF0b3JMb2dzUHJlZGljYXRlfSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5zaW0gPSBzaW07XG4gICAgdGhpcy5zaG93TG9ncyA9ICEhc2hvd0xvZ3M7XG4gICAgdGhpcy54Y29kZVZlcnNpb24gPSB4Y29kZVZlcnNpb247XG4gICAgdGhpcy5wcmVkaWNhdGUgPSBpb3NTaW11bGF0b3JMb2dzUHJlZGljYXRlO1xuICAgIHRoaXMucHJvYyA9IG51bGw7XG4gIH1cblxuICBhc3luYyBzdGFydENhcHR1cmUgKCkge1xuICAgIGlmIChfLmlzVW5kZWZpbmVkKHRoaXMuc2ltLnVkaWQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYExvZyBjYXB0dXJlIHJlcXVpcmVzIGEgc2ltIHVkaWRgKTtcbiAgICB9XG5cbiAgICBpZiAoIWF3YWl0IHRoaXMuc2ltLmlzUnVubmluZygpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGlPUyBTaW11bGF0b3Igd2l0aCB1ZGlkICcke3RoaXMuc2ltLnVkaWR9JyBpcyBub3QgcnVubmluZ2ApO1xuICAgIH1cbiAgICBjb25zdCBzcGF3bkFyZ3MgPSBbXG4gICAgICAnbG9nJyxcbiAgICAgICdzdHJlYW0nLFxuICAgICAgJy0tc3R5bGUnLCAnY29tcGFjdCcsXG4gICAgXTtcbiAgICBpZiAodGhpcy5wcmVkaWNhdGUpIHtcbiAgICAgIHNwYXduQXJncy5wdXNoKCctLXByZWRpY2F0ZScsIHRoaXMucHJlZGljYXRlKTtcbiAgICB9XG4gICAgbG9nLmRlYnVnKGBTdGFydGluZyBsb2cgY2FwdHVyZSBmb3IgaU9TIFNpbXVsYXRvciB3aXRoIHVkaWQgJyR7dGhpcy5zaW0udWRpZH0nIGAgK1xuICAgICAgYHVzaW5nIHNpbWN0bGApO1xuICAgIHRyeSB7XG4gICAgICAvLyBjbGVhbnVwIGV4aXN0aW5nIGxpc3RlbmVycyBpZiB0aGUgcHJldmlvdXMgc2Vzc2lvbiBoYXMgbm90IGJlZW4gdGVybWluYXRlZCBwcm9wZXJseVxuICAgICAgYXdhaXQgZXhlYygncGtpbGwnLCBbJy1mJywgW3RoaXMuc2ltLnVkaWQsIC4uLnNwYXduQXJnc10uam9pbignICcpXSk7XG4gICAgfSBjYXRjaCAoaWduKSB7fVxuICAgIHRyeSB7XG4gICAgICB0aGlzLnByb2MgPSBhd2FpdCB0aGlzLnNpbS5zaW1jdGwuc3Bhd25TdWJQcm9jZXNzKHNwYXduQXJncyk7XG4gICAgICBhd2FpdCB0aGlzLmZpbmlzaFN0YXJ0aW5nTG9nQ2FwdHVyZSgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgU2ltdWxhdG9yIGxvZyBjYXB0dXJlIGZhaWxlZC4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZpbmlzaFN0YXJ0aW5nTG9nQ2FwdHVyZSAoKSB7XG4gICAgaWYgKCF0aGlzLnByb2MpIHtcbiAgICAgIGxvZy5lcnJvckFuZFRocm93KCdDb3VsZCBub3QgY2FwdHVyZSBzaW11bGF0b3IgbG9nJyk7XG4gICAgfVxuICAgIGxldCBmaXJzdExpbmUgPSB0cnVlO1xuICAgIGxldCBsb2dSb3cgPSAnJztcbiAgICB0aGlzLnByb2Mub24oJ291dHB1dCcsIChzdGRvdXQsIHN0ZGVycikgPT4ge1xuICAgICAgaWYgKHN0ZG91dCkge1xuICAgICAgICBpZiAoZmlyc3RMaW5lKSB7XG4gICAgICAgICAgaWYgKHN0ZG91dC5lbmRzV2l0aCgnXFxuJykpIHtcbiAgICAgICAgICAgIC8vIGRvbid0IHN0b3JlIHRoZSBmaXJzdCBsaW5lIG9mIHRoZSBsb2cgYmVjYXVzZSBpdCBjYW1lIGJlZm9yZSB0aGUgc2ltIHdhcyBsYXVuY2hlZFxuICAgICAgICAgICAgZmlyc3RMaW5lID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZ1JvdyArPSBzdGRvdXQ7XG4gICAgICAgICAgaWYgKHN0ZG91dC5lbmRzV2l0aCgnXFxuJykpIHtcbiAgICAgICAgICAgIHRoaXMub25PdXRwdXQobG9nUm93KTtcbiAgICAgICAgICAgIGxvZ1JvdyA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHN0ZGVycikge1xuICAgICAgICB0aGlzLm9uT3V0cHV0KGxvZ1JvdywgJ1NUREVSUicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbGV0IHNkID0gKHN0ZG91dCwgc3RkZXJyKSA9PiB7XG4gICAgICBpZiAoL2V4ZWN2cFxcKFxcKS8udGVzdChzdGRlcnIpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignaU9TIGxvZyBjYXB0dXJlIHByb2Nlc3MgZmFpbGVkIHRvIHN0YXJ0Jyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3Rkb3V0IHx8IHN0ZGVycjtcbiAgICB9O1xuICAgIGF3YWl0IHRoaXMucHJvYy5zdGFydChzZCwgU1RBUlRfVElNRU9VVCk7XG4gIH1cblxuICBhc3luYyBzdG9wQ2FwdHVyZSAoKSB7XG4gICAgaWYgKCF0aGlzLnByb2MpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5raWxsTG9nU3ViUHJvY2VzcygpO1xuICAgIHRoaXMucHJvYyA9IG51bGw7XG4gIH1cblxuICBhc3luYyBraWxsTG9nU3ViUHJvY2VzcyAoKSB7XG4gICAgaWYgKCF0aGlzLnByb2MuaXNSdW5uaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxvZy5kZWJ1ZygnU3RvcHBpbmcgaU9TIGxvZyBjYXB0dXJlJyk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMucHJvYy5zdG9wKCdTSUdURVJNJywgMTAwMCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKCF0aGlzLnByb2MuaXNSdW5uaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGxvZy53YXJuKCdDYW5ub3Qgc3RvcCBsb2cgY2FwdHVyZSBwcm9jZXNzLiBTZW5kaW5nIFNJR0tJTEwnKTtcbiAgICAgIGF3YWl0IHRoaXMucHJvYy5zdG9wKCdTSUdLSUxMJyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGlzQ2FwdHVyaW5nICgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9jICYmIHRoaXMucHJvYy5pc1J1bm5pbmc7XG4gIH1cblxuICBvbk91dHB1dCAobG9nUm93LCBwcmVmaXggPSAnJykge1xuICAgIGNvbnN0IGxvZ3MgPSBfLmNsb25lRGVlcChsb2dSb3cuc3BsaXQoJ1xcbicpKTtcbiAgICBmb3IgKGNvbnN0IGxvZ0xpbmUgb2YgbG9ncykge1xuICAgICAgaWYgKCFsb2dMaW5lKSBjb250aW51ZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBjdXJseVxuICAgICAgdGhpcy5icm9hZGNhc3QobG9nTGluZSk7XG4gICAgICBpZiAodGhpcy5zaG93TG9ncykge1xuICAgICAgICBjb25zdCBzcGFjZSA9IHByZWZpeC5sZW5ndGggPiAwID8gJyAnIDogJyc7XG4gICAgICAgIGxvZy5pbmZvKGBbSU9TX1NZU0xPR19ST1cke3NwYWNlfSR7cHJlZml4fV0gJHtsb2dMaW5lfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgeyBJT1NTaW11bGF0b3JMb2cgfTtcbmV4cG9ydCBkZWZhdWx0IElPU1NpbXVsYXRvckxvZztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBLE1BQU1BLEdBQUcsR0FBR0MsZUFBTSxDQUFDQyxTQUFTLENBQUMsaUJBQWlCLENBQUM7QUFFL0MsTUFBTUMsYUFBYSxHQUFHLEtBQUs7QUFFM0IsTUFBTUMsZUFBZSxTQUFTQyxjQUFNLENBQUM7RUFDbkNDLFdBQVcsQ0FBRTtJQUFDQyxHQUFHO0lBQUVDLFFBQVE7SUFBRUMsWUFBWTtJQUFFQztFQUF5QixDQUFDLEVBQUU7SUFDckUsS0FBSyxF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