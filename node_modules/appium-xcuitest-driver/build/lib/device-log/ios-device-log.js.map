{"version":3,"file":"ios-device-log.js","names":["log","logger","getLogger","IOSDeviceLog","IOSLog","constructor","opts","udid","showLogs","service","startCapture","services","startSyslogService","start","onLog","bind","logLine","broadcast","info","isCapturing","stopCapture","close"],"sources":["../../../lib/device-log/ios-device-log.js"],"sourcesContent":["import { logger } from 'appium/support';\nimport { IOSLog } from './ios-log';\nimport { services } from 'appium-ios-device';\n\nconst log = logger.getLogger('IOSDeviceLog');\n\nclass IOSDeviceLog extends IOSLog {\n\n  constructor (opts) {\n    super();\n    this.udid = opts.udid;\n    this.showLogs = !!opts.showLogs;\n    this.service = null;\n  }\n\n  async startCapture () {\n    if (this.service) {\n      return;\n    }\n    this.service = await services.startSyslogService(this.udid);\n    this.service.start(this.onLog.bind(this));\n  }\n\n  onLog (logLine) {\n    this.broadcast(logLine);\n    if (this.showLogs) {\n      log.info(logLine);\n    }\n  }\n\n  get isCapturing () {\n    return !!this.service;\n  }\n\n  stopCapture () {\n    if (!this.service) {\n      return;\n    }\n    this.service.close();\n    this.service = null;\n  }\n}\n\nexport { IOSDeviceLog };\nexport default IOSDeviceLog;\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA,MAAMA,GAAG,GAAGC,eAAM,CAACC,SAAS,CAAC,cAAc,CAAC;AAE5C,MAAMC,YAAY,SAASC,cAAM,CAAC;EAEhCC,WAAW,CAAEC,IAAI,EAAE;IACjB,KAAK,EAAE;IACP,IAAI,CAACC,IAAI,GAAGD,IAAI,CAACC,IAAI;IACrB,IAAI,CAACC,QAAQ,GAAG,CAAC,CAACF,IAAI,CAACE,QAAQ;IAC/B,IAAI,CAACC,OAAO,GAAG,IAAI;EACrB;EAEA,MAAMC,YAAY,GAAI;IACpB,IAAI,IAAI,CAACD,OAAO,EAAE;MAChB;IACF;IACA,IAAI,CAACA,OAAO,GAAG,MAAME,yBAAQ,CAACC,kBAAkB,CAAC,IAAI,CAACL,IAAI,CAAC;IAC3D,IAAI,CAACE,OAAO,CAACI,KAAK,CAAC,IAAI,CAACC,KAAK,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC;EAC3C;EAEAD,KAAK,CAAEE,OAAO,EAAE;IACd,IAAI,CAACC,SAAS,CAACD,OAAO,CAAC;IACvB,IAAI,IAAI,CAACR,QAAQ,EAAE;MACjBR,GAAG,CAACkB,IAAI,CAACF,OAAO,CAAC;IACnB;EACF;EAEA,IAAIG,WAAW,GAAI;IACjB,OAAO,CAAC,CAAC,IAAI,CAACV,OAAO;EACvB;EAEAW,WAAW,GAAI;IACb,IAAI,CAAC,IAAI,CAACX,OAAO,EAAE;MACjB;IACF;IACA,IAAI,CAACA,OAAO,CAACY,KAAK,EAAE;IACpB,IAAI,CAACZ,OAAO,GAAG,IAAI;EACrB;AACF;AAAC;AAAA,eAGcN,YAAY;AAAA"}