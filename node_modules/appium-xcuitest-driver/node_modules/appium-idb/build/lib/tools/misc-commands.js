"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
require("source-map-support/register");
var _logger = _interopRequireDefault(require("../logger.js"));
var _lodash = _interopRequireDefault(require("lodash"));
var _helpers = require("../helpers");
const miscCommands = {};
miscCommands.describeDevice = async function describeDevice() {
  _logger.default.debug(`Describing the device '${this.udid}'`);
  const output = await this.exec(['describe'], ['--json']);
  return (0, _helpers.fixOutputToObject)(output);
};
miscCommands.focusSimulator = async function focusSimulator() {
  _logger.default.debug(`Focusing Simulator '${this.udid}'`);
  await this.exec(['focus']);
};
miscCommands.openUrl = async function openUrl(url) {
  _logger.default.debug(`Opening URL '${url}' on the device '${this.udid}'`);
  await this.exec(['open'], [url]);
};
miscCommands.clearKeychain = async function clearKeychain() {
  _logger.default.debug(`Clearing keychain on the device '${this.udid}'`);
  await this.exec(['clear-keychain']);
};
miscCommands.setLocation = async function setLocation(latitude, longitude) {
  _logger.default.debug(`Setting location (${latitude}, ${longitude}) on the device '${this.udid}'`);
  await this.exec(['set-location'], [latitude, longitude]);
};
miscCommands.approve = async function approve(bundleId, permissions) {
  _logger.default.debug(`Approving permissions (${JSON.stringify(permissions)}) for '${bundleId}' ` + `on the device '${this.udid}'`);
  const command = ['approve'];
  const args = [];
  if (_lodash.default.isArray(permissions)) {
    args.push(...permissions);
  } else {
    args.push(permissions);
  }
  args.push(bundleId);
  await this.exec(command, args);
};
miscCommands.addContacts = async function addContacts(dbPath) {
  _logger.default.debug(`Adding contacts from (${dbPath}) to the device '${this.udid}'`);
  await this.exec(['contacts', 'update'], [dbPath]);
};
var _default = miscCommands;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtaXNjQ29tbWFuZHMiLCJkZXNjcmliZURldmljZSIsImxvZyIsImRlYnVnIiwidWRpZCIsIm91dHB1dCIsImV4ZWMiLCJmaXhPdXRwdXRUb09iamVjdCIsImZvY3VzU2ltdWxhdG9yIiwib3BlblVybCIsInVybCIsImNsZWFyS2V5Y2hhaW4iLCJzZXRMb2NhdGlvbiIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiYXBwcm92ZSIsImJ1bmRsZUlkIiwicGVybWlzc2lvbnMiLCJKU09OIiwic3RyaW5naWZ5IiwiY29tbWFuZCIsImFyZ3MiLCJfIiwiaXNBcnJheSIsInB1c2giLCJhZGRDb250YWN0cyIsImRiUGF0aCJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi90b29scy9taXNjLWNvbW1hbmRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2cgZnJvbSAnLi4vbG9nZ2VyLmpzJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBmaXhPdXRwdXRUb09iamVjdCB9IGZyb20gJy4uL2hlbHBlcnMnO1xuXG5cbmNvbnN0IG1pc2NDb21tYW5kcyA9IHt9O1xuXG4vKipcbiAqIFJldHVybnMgbWV0YWRhdGEgYWJvdXQgdGhlIHNwZWNpZmllZCB0YXJnZXQuXG4gKiBPdXRwdXQgZXhhbXBsZTpcbiAqIHRhcmdldF9kZXNjcmlwdGlvbiB7XG4gKiAgIHVkaWQ6IFwiMTRFQkRFREUtMEM5RS00NkI0LUIxRkYtMDg4MUYxMUQwRTc1XCJcbiAqICAgbmFtZTogXCJpUGhvbmUgWFxcMzEyXFwyMDBcIlxuICogICBzY3JlZW5fZGltZW5zaW9ucyB7XG4gKiAgICAgd2lkdGg6IDgyOFxuICogICAgIGhlaWdodDogMTc5MlxuICogICAgIGRlbnNpdHk6IDIuMFxuICogICAgIHdpZHRoX3BvaW50czogNDE0XG4gKiAgICAgaGVpZ2h0X3BvaW50czogODk2XG4gKiAgIH1cbiAqICAgc3RhdGU6IFwiYm9vdGVkXCJcbiAqICAgdGFyZ2V0X3R5cGU6IFwic2ltdWxhdG9yXCJcbiAqICAgb3NfdmVyc2lvbjogXCJpT1MgMTIuMlwiXG4gKiAgIGFyY2hpdGVjdHVyZTogXCJ4ODZfNjRcIlxuICogfVxuICpcbiAqIEByZXR1cm5zIHtvYmplY3R9IFRoZSBjb21tYW5kIG91dHB1dCBwYXJzZWQgdG8gYW4gb2JqZWN0XG4gKi9cbm1pc2NDb21tYW5kcy5kZXNjcmliZURldmljZSA9IGFzeW5jIGZ1bmN0aW9uIGRlc2NyaWJlRGV2aWNlICgpIHtcbiAgbG9nLmRlYnVnKGBEZXNjcmliaW5nIHRoZSBkZXZpY2UgJyR7dGhpcy51ZGlkfSdgKTtcbiAgY29uc3Qgb3V0cHV0ID0gYXdhaXQgdGhpcy5leGVjKFsnZGVzY3JpYmUnXSwgWyctLWpzb24nXSk7XG4gIHJldHVybiBmaXhPdXRwdXRUb09iamVjdChvdXRwdXQpO1xufTtcblxuLyoqXG4gKiBCcmluZ3MgYSBzaW11bGF0b3JzIHdpbmRvdyB0byB0aGUgZm9yZWdyb3VuZC5cbiAqL1xubWlzY0NvbW1hbmRzLmZvY3VzU2ltdWxhdG9yID0gYXN5bmMgZnVuY3Rpb24gZm9jdXNTaW11bGF0b3IgKCkge1xuICBsb2cuZGVidWcoYEZvY3VzaW5nIFNpbXVsYXRvciAnJHt0aGlzLnVkaWR9J2ApO1xuICBhd2FpdCB0aGlzLmV4ZWMoWydmb2N1cyddKTtcbn07XG5cbi8qKlxuICogT3BlbnMgdGhlIHNwZWNpZmllZCBVUkwgb24gdGhlIHRhcmdldC5cbiAqIFRoaXMgd29ya3MgYm90aCB3aXRoIHdlYiBhZGRyZXNzZXMgYW5kIFVSTCBzY2hlbWVzIHByZXNlbnQgb24gdGhlIHRhcmdldC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSB1cmwgdG8gb3BlblxuICovXG5taXNjQ29tbWFuZHMub3BlblVybCA9IGFzeW5jIGZ1bmN0aW9uIG9wZW5VcmwgKHVybCkge1xuICBsb2cuZGVidWcoYE9wZW5pbmcgVVJMICcke3VybH0nIG9uIHRoZSBkZXZpY2UgJyR7dGhpcy51ZGlkfSdgKTtcbiAgYXdhaXQgdGhpcy5leGVjKFsnb3BlbiddLCBbdXJsXSk7XG59O1xuXG4vKipcbiAqIENsZWFyIHRoZSBlbnRpcmUga2V5Y2hhaW4gb24gU2ltdWxhdG9yLlxuICovXG5taXNjQ29tbWFuZHMuY2xlYXJLZXljaGFpbiA9IGFzeW5jIGZ1bmN0aW9uIGNsZWFyS2V5Y2hhaW4gKCkge1xuICBsb2cuZGVidWcoYENsZWFyaW5nIGtleWNoYWluIG9uIHRoZSBkZXZpY2UgJyR7dGhpcy51ZGlkfSdgKTtcbiAgYXdhaXQgdGhpcy5leGVjKFsnY2xlYXIta2V5Y2hhaW4nXSk7XG59O1xuXG4vKipcbiAqIE92ZXJyaWRlcyBhIHNpbXVsYXRvcnMgbG9jYXRpb25cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGxhdGl0dWRlIFRoZSBsYXRpdHVkZSB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBsb25naXR1ZGUgVGhlIGxvbmdpdHVkZSB2YWx1ZVxuICovXG5taXNjQ29tbWFuZHMuc2V0TG9jYXRpb24gPSBhc3luYyBmdW5jdGlvbiBzZXRMb2NhdGlvbiAobGF0aXR1ZGUsIGxvbmdpdHVkZSkge1xuICBsb2cuZGVidWcoYFNldHRpbmcgbG9jYXRpb24gKCR7bGF0aXR1ZGV9LCAke2xvbmdpdHVkZX0pIG9uIHRoZSBkZXZpY2UgJyR7dGhpcy51ZGlkfSdgKTtcbiAgYXdhaXQgdGhpcy5leGVjKFsnc2V0LWxvY2F0aW9uJ10sIFtsYXRpdHVkZSwgbG9uZ2l0dWRlXSk7XG59O1xuXG4vKipcbiAqIFByb2dyYW1tYXRpY2FsbHkgYXBwcm92ZSBwZXJtaXNzaW9uIGZvciBhbiBhcHAgb24gU2ltdWxhdG9yXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJ1bmRsZUlkIEFwcGxpY2F0aW9uIGlkZW50aWZpZXIgdG8gc2V0IHRoZSBwZXJtaXNzaW9ucyBmb3JcbiAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHBlcm1pc3Npb25zIFRoZSBwZXJtaXNzaW9uKHMpIHRvIGFwcGx5LiBDYW4gYmVcbiAqIG9uZSBvZiB7cGhvdG9zLGNhbWVyYSxjYW1lcmF9XG4gKi9cbm1pc2NDb21tYW5kcy5hcHByb3ZlID0gYXN5bmMgZnVuY3Rpb24gYXBwcm92ZSAoYnVuZGxlSWQsIHBlcm1pc3Npb25zKSB7XG4gIGxvZy5kZWJ1ZyhgQXBwcm92aW5nIHBlcm1pc3Npb25zICgke0pTT04uc3RyaW5naWZ5KHBlcm1pc3Npb25zKX0pIGZvciAnJHtidW5kbGVJZH0nIGAgK1xuICAgIGBvbiB0aGUgZGV2aWNlICcke3RoaXMudWRpZH0nYCk7XG4gIGNvbnN0IGNvbW1hbmQgPSBbJ2FwcHJvdmUnXTtcbiAgY29uc3QgYXJncyA9IFtdO1xuICBpZiAoXy5pc0FycmF5KHBlcm1pc3Npb25zKSkge1xuICAgIGFyZ3MucHVzaCguLi5wZXJtaXNzaW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgYXJncy5wdXNoKHBlcm1pc3Npb25zKTtcbiAgfVxuICBhcmdzLnB1c2goYnVuZGxlSWQpO1xuICBhd2FpdCB0aGlzLmV4ZWMoY29tbWFuZCwgYXJncyk7XG59O1xuXG4vKipcbiAqIE92ZXJ3cml0ZSB0aGUgc2ltdWxhdG9ycyBjb250YWN0cyBkYlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBkYlBhdGggRnVsbCBwYXRoIHRvIHRoZSBTUUxpdGUgZGIgY29udGFpbmluZyB0aGUgY29udGFjdHNcbiAqL1xubWlzY0NvbW1hbmRzLmFkZENvbnRhY3RzID0gYXN5bmMgZnVuY3Rpb24gYWRkQ29udGFjdHMgKGRiUGF0aCkge1xuICBsb2cuZGVidWcoYEFkZGluZyBjb250YWN0cyBmcm9tICgke2RiUGF0aH0pIHRvIHRoZSBkZXZpY2UgJyR7dGhpcy51ZGlkfSdgKTtcbiAgYXdhaXQgdGhpcy5leGVjKFsnY29udGFjdHMnLCAndXBkYXRlJ10sIFtkYlBhdGhdKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IG1pc2NDb21tYW5kcztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFHQSxNQUFNQSxZQUFZLEdBQUcsQ0FBQyxDQUFDO0FBdUJ2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