"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.InstallationProxyService = exports.INSTALLATION_PROXY_SERVICE_NAME = void 0;
require("source-map-support/register");
var _lodash = _interopRequireDefault(require("lodash"));
var _baseService = require("../base-service");
const INSTALLATION_PROXY_SERVICE_NAME = 'com.apple.mobile.installation_proxy';
exports.INSTALLATION_PROXY_SERVICE_NAME = INSTALLATION_PROXY_SERVICE_NAME;
class InstallationProxyService extends _baseService.BaseServicePlist {
  async installApplication(path, clientOptions = {}, timeout = 60000) {
    const request = {
      Command: 'Install',
      PackagePath: path,
      ClientOptions: clientOptions
    };
    this._plistService.sendPlist(request);
    return await this._waitMessageCompletion(timeout);
  }
  async upgradeApplication(path, clientOptions = {}, timeout = 60000) {
    const request = {
      Command: 'Upgrade',
      PackagePath: path,
      ClientOptions: clientOptions
    };
    this._plistService.sendPlist(request);
    return await this._waitMessageCompletion(timeout);
  }
  async listApplications(opts = {}) {
    const request = {
      Command: 'Browse',
      ClientOptions: {}
    };
    if (opts.applicationType) {
      request.ClientOptions.ApplicationType = opts.applicationType;
    }
    if (opts.returnAttributes) {
      request.ClientOptions.ReturnAttributes = opts.returnAttributes;
    }
    this._plistService.sendPlist(request);
    const messages = await this._waitMessageCompletion();
    return messages.reduce(function (acc, message) {
      if (!message.CurrentList) {
        return acc;
      }
      message.CurrentList.forEach(function (app) {
        acc[app.CFBundleIdentifier] = app;
      });
      return acc;
    }, {});
  }
  async lookupApplications(opts = {}) {
    const request = {
      Command: 'Lookup',
      ClientOptions: {}
    };
    if (opts.bundleIds) {
      request.ClientOptions.BundleIDs = _lodash.default.isString(opts.bundleIds) ? [opts.bundleIds] : opts.bundleIds;
    }
    if (opts.applicationType) {
      request.ClientOptions.ApplicationType = opts.applicationType;
    }
    if (opts.returnAttributes) {
      request.ClientOptions.ReturnAttributes = opts.returnAttributes;
    }
    this._plistService.sendPlist(request);
    const messages = await this._waitMessageCompletion();
    for (const message of messages) {
      if (message.LookupResult) {
        return message.LookupResult;
      }
    }
    throw new Error(`Could not find LookupResult in the response: Response: ${JSON.stringify(messages)}`);
  }
  async uninstallApplication(bundleId, timeout = 20000) {
    const request = {
      Command: 'Uninstall',
      ApplicationIdentifier: bundleId
    };
    this._plistService.sendPlist(request);
    return await this._waitMessageCompletion(timeout);
  }
  async _waitMessageCompletion(timeout) {
    let messages = [];
    for (let i = 0; i < Number.MAX_SAFE_INTEGER; i++) {
      const data = await this._plistService.receivePlist(timeout);
      messages.push(data);
      if (this._isFinished(data)) {
        return messages;
      }
    }
  }
  _isFinished(response) {
    if (response.Error) {
      throw new Error(`Unexpected data: ${JSON.stringify(response)}`);
    }
    if (!response.Status) {
      return false;
    }
    return response.Status === 'Complete';
  }
}
exports.InstallationProxyService = InstallationProxyService;
var _default = InstallationProxyService;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJTlNUQUxMQVRJT05fUFJPWFlfU0VSVklDRV9OQU1FIiwiSW5zdGFsbGF0aW9uUHJveHlTZXJ2aWNlIiwiQmFzZVNlcnZpY2VQbGlzdCIsImluc3RhbGxBcHBsaWNhdGlvbiIsInBhdGgiLCJjbGllbnRPcHRpb25zIiwidGltZW91dCIsInJlcXVlc3QiLCJDb21tYW5kIiwiUGFja2FnZVBhdGgiLCJDbGllbnRPcHRpb25zIiwiX3BsaXN0U2VydmljZSIsInNlbmRQbGlzdCIsIl93YWl0TWVzc2FnZUNvbXBsZXRpb24iLCJ1cGdyYWRlQXBwbGljYXRpb24iLCJsaXN0QXBwbGljYXRpb25zIiwib3B0cyIsImFwcGxpY2F0aW9uVHlwZSIsIkFwcGxpY2F0aW9uVHlwZSIsInJldHVybkF0dHJpYnV0ZXMiLCJSZXR1cm5BdHRyaWJ1dGVzIiwibWVzc2FnZXMiLCJyZWR1Y2UiLCJhY2MiLCJtZXNzYWdlIiwiQ3VycmVudExpc3QiLCJmb3JFYWNoIiwiYXBwIiwiQ0ZCdW5kbGVJZGVudGlmaWVyIiwibG9va3VwQXBwbGljYXRpb25zIiwiYnVuZGxlSWRzIiwiQnVuZGxlSURzIiwiXyIsImlzU3RyaW5nIiwiTG9va3VwUmVzdWx0IiwiRXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwidW5pbnN0YWxsQXBwbGljYXRpb24iLCJidW5kbGVJZCIsIkFwcGxpY2F0aW9uSWRlbnRpZmllciIsImkiLCJOdW1iZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiZGF0YSIsInJlY2VpdmVQbGlzdCIsInB1c2giLCJfaXNGaW5pc2hlZCIsInJlc3BvbnNlIiwiU3RhdHVzIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vbGliL2luc3RhbGxhdGlvbi1wcm94eS9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgQmFzZVNlcnZpY2VQbGlzdCB9IGZyb20gJy4uL2Jhc2Utc2VydmljZSc7XG5cbi8qXG4gKiBodHRwczovL2dpdGh1Yi5jb20vdG1vdGh5MjAwMTMvbGliaW1vYmlsZWRldmljZS1tYXN0ZXIvYmxvYi9lY2Q4OWI0MjAyMWNmNmY3ZWZlOWFkMjcxYjNiZGRjN2RkNGIyODFlL3NyYy9pbnN0YWxsYXRpb25fcHJveHkuY1xuICovXG5cbmNvbnN0IElOU1RBTExBVElPTl9QUk9YWV9TRVJWSUNFX05BTUUgPSAnY29tLmFwcGxlLm1vYmlsZS5pbnN0YWxsYXRpb25fcHJveHknO1xuXG5jbGFzcyBJbnN0YWxsYXRpb25Qcm94eVNlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZVBsaXN0IHtcbiAgLyoqXG4gICAqIEluc3RhbGwgdGhlIGFwcGxpY2F0aW9uIG9uIHRoZSByZWxhdGl2ZSBwYXRoIG9uIHRoZSBwaG9uZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBUaGUgcGF0aCB3aGVyZSB0aGUgLmFwcCBhbmQgLmlwYSBpcyBsb2NhdGVkIGF0IG9uIHRoZSBwaG9uZVxuICAgKiBAcGFyYW0ge09iamVjdH0gY2xpZW50T3B0aW9ucyBUaGUgZXh0cmEgb3B0aW9ucyB0aGF0IHdhbnRzIHRvIGJlIHBhc3NlZCB0byB0aGUgaW5zdGFsbGRcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVvdXQgWzYwMDAwXSBUaGUgdGltZW91dCBiZXR3ZWVuIG1lc3NhZ2VzIHJlY2VpdmVkIGZyb20gdGhlIHBob25lIGFzIHN0YXR1cyB1cGRhdGVzXG4gICAqL1xuICBhc3luYyBpbnN0YWxsQXBwbGljYXRpb24gKHBhdGgsIGNsaWVudE9wdGlvbnMgPSB7fSwgdGltZW91dCA9IDYwMDAwKSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgIENvbW1hbmQ6ICdJbnN0YWxsJyxcbiAgICAgIFBhY2thZ2VQYXRoOiBwYXRoLFxuICAgICAgQ2xpZW50T3B0aW9uczogY2xpZW50T3B0aW9uc1xuICAgIH07XG5cbiAgICB0aGlzLl9wbGlzdFNlcnZpY2Uuc2VuZFBsaXN0KHJlcXVlc3QpO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl93YWl0TWVzc2FnZUNvbXBsZXRpb24odGltZW91dCk7XG4gIH1cblxuICAvKipcbiAgICogVXBncmFkZXMgdGhlIGdpdmVuIGFwcGxpY2F0aW9uIGZyb20gdGhlIHJlbGF0aXZlIHBhdGggb24gdGhlIHBob25lLlxuICAgKiBJdCBpcyByZXF1aXJlZCB0aGF0IGEgcHJldmlvdXMgdmVyc2lvbiBvZiB0aGUgc2FtZSBhcHAgaXMgYWxyZWFkeSBpbnN0YWxsZWQgaW4gb3JkZXJcbiAgICogdG8gY2FsbCB0aGlzIEFQSS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggd2hlcmUgdGhlIC5hcHAgYW5kIC5pcGEgaXMgbG9jYXRlZCBhdCBvbiB0aGUgcGhvbmVcbiAgICogQHBhcmFtIHtPYmplY3R9IGNsaWVudE9wdGlvbnMgVGhlIGV4dHJhIG9wdGlvbnMgdGhhdCB3YW50cyB0byBiZSBwYXNzZWQgdG8gdGhlIGluc3RhbGxkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lb3V0IFs2MDAwMF0gVGhlIHRpbWVvdXQgYmV0d2VlbiBtZXNzYWdlcyByZWNlaXZlZCBmcm9tIHRoZSBwaG9uZSBhcyBzdGF0dXMgdXBkYXRlc1xuICAgKi9cbiAgYXN5bmMgdXBncmFkZUFwcGxpY2F0aW9uIChwYXRoLCBjbGllbnRPcHRpb25zID0ge30sIHRpbWVvdXQgPSA2MDAwMCkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICBDb21tYW5kOiAnVXBncmFkZScsXG4gICAgICBQYWNrYWdlUGF0aDogcGF0aCxcbiAgICAgIENsaWVudE9wdGlvbnM6IGNsaWVudE9wdGlvbnNcbiAgICB9O1xuXG4gICAgdGhpcy5fcGxpc3RTZXJ2aWNlLnNlbmRQbGlzdChyZXF1ZXN0KTtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fd2FpdE1lc3NhZ2VDb21wbGV0aW9uKHRpbWVvdXQpO1xuICB9XG5cbiAgLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBMaXN0QXBwbGljYXRpb25PcHRpb25zXG4gKlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGFwcGxpY2F0aW9uVHlwZSBvZiB0aGUgd2hpY2ggZ3JvdXAgeW91IHdhbnQgdG8gbGlzdC4gVGhlc2UgY2FuIGJlIFVzZXIsIFN5c3RlbSBvciBsZWF2ZSBpdCBlbXB0eSBmb3IgYm90aFxuICogQHByb3BlcnR5IHtBcnJheX0gcmV0dXJuQXR0cmlidXRlcyB0aGUgZmllbGRzIHdoaWNoIHNob3VsZCBiZSBmaWx0ZXJlZCBhbmQgcmV0dXJuZWQgdG8gdGhlIGNsaWVudC4gTGVhdmUgdGhpcyBwYXJhbWV0ZXIgZW1wdHkgaWYgeW91IGRvbid0IHdhbnQgdG8gZmlsdGVyXG4gKi9cblxuICAvKipcbiAgICogTGlzdHMgYXBwbGljYXRpb25zIGFjY29yZGluZyB0byB0aGUgb3B0cyBhbmQgcmV0dXJucyB0aGVtIGFzIGEgbWFwXG4gICAqIEBwYXJhbSB7TGlzdEFwcGxpY2F0aW9uT3B0aW9uc30gb3B0cyB0aGUgbGlzdGluZyBvcHRpb25zIHRoYXQgd2FudHMgdG8gYmUgcGFzc2VkXG4gICAqIEByZXR1cm5zIEEgbWFwIG9mIHRoZSBhcHBsaWNhdGlvbnMgd2hpY2ggdGhlIGtleSBpcyB0aGUgYnVuZGxlSWRcbiAgICovXG4gIGFzeW5jIGxpc3RBcHBsaWNhdGlvbnMgKG9wdHMgPSB7fSkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICBDb21tYW5kOiAnQnJvd3NlJyxcbiAgICAgIENsaWVudE9wdGlvbnM6IHt9XG4gICAgfTtcblxuICAgIGlmIChvcHRzLmFwcGxpY2F0aW9uVHlwZSkge1xuICAgICAgcmVxdWVzdC5DbGllbnRPcHRpb25zLkFwcGxpY2F0aW9uVHlwZSA9IG9wdHMuYXBwbGljYXRpb25UeXBlO1xuICAgIH1cbiAgICBpZiAob3B0cy5yZXR1cm5BdHRyaWJ1dGVzKSB7XG4gICAgICByZXF1ZXN0LkNsaWVudE9wdGlvbnMuUmV0dXJuQXR0cmlidXRlcyA9IG9wdHMucmV0dXJuQXR0cmlidXRlcztcbiAgICB9XG5cbiAgICB0aGlzLl9wbGlzdFNlcnZpY2Uuc2VuZFBsaXN0KHJlcXVlc3QpO1xuICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgdGhpcy5fd2FpdE1lc3NhZ2VDb21wbGV0aW9uKCk7XG4gICAgcmV0dXJuIG1lc3NhZ2VzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBtZXNzYWdlKSB7XG4gICAgICBpZiAoIW1lc3NhZ2UuQ3VycmVudExpc3QpIHtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH1cbiAgICAgIG1lc3NhZ2UuQ3VycmVudExpc3QuZm9yRWFjaChmdW5jdGlvbiAoYXBwKSB7XG4gICAgICAgIGFjY1thcHAuQ0ZCdW5kbGVJZGVudGlmaWVyXSA9IGFwcDtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG4gIH1cblxuICAvKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IExvb2t1cEFwcGxpY2F0aW9uT3B0aW9uc1xuICpcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBhcHBsaWNhdGlvblR5cGUgb2YgdGhlIHdoaWNoIGdyb3VwIHlvdSB3YW50IHRvIGxpc3QuIFRoZXNlIGNhbiBiZSBVc2VyLCBTeXN0ZW0gb3IgbGVhdmUgaXQgZW1wdHkgZm9yIGJvdGhcbiAqIEBwcm9wZXJ0eSB7QXJyYXl9IHJldHVybkF0dHJpYnV0ZXMgdGhlIGZpZWxkcyB3aGljaCBzaG91bGQgYmUgZmlsdGVyZWQgYW5kIHJldHVybmVkIHRvIHRoZSBjbGllbnQuIExlYXZlIHRoaXMgcGFyYW1ldGVyIGVtcHR5IGlmIHlvdSBkb24ndCB3YW50IHRvIGZpbHRlclxuICogQHByb3BlcnR5IHtzdHJpbmd8QXJyYXl9IGJ1bmRsZUlkcyBCdW5kbGUgSWRzIG9mIHRoZSBhcHBzIHRoYXQgc2hvdWxkIGJlIHNlYXJjaGVkXG4gKi9cblxuICAvKipcbiAgICogTGlzdHMgYXBwbGljYXRpb25zIGFjY29yZGluZyB0byB0aGUgb3B0cyBhbmQgcmV0dXJucyB0aGVtIGFzIGEgbWFwXG4gICAqIEBwYXJhbSB7TG9va3VwQXBwbGljYXRpb25PcHRpb25zfSBvcHRzIHRoZSBsb29rdXAgb3B0aW9ucyB0aGF0IHdhbnRzIHRvIGJlIHBhc3NlZFxuICAgKiBAcmV0dXJucyBBIG1hcCBvZiB0aGUgYXBwbGljYXRpb25zIHdoaWNoIHRoZSBrZXkgaXMgdGhlIGJ1bmRsZUlkXG4gICAqL1xuICBhc3luYyBsb29rdXBBcHBsaWNhdGlvbnMgKG9wdHMgPSB7fSkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICBDb21tYW5kOiAnTG9va3VwJyxcbiAgICAgIENsaWVudE9wdGlvbnM6IHt9XG4gICAgfTtcbiAgICBpZiAob3B0cy5idW5kbGVJZHMpIHtcbiAgICAgIHJlcXVlc3QuQ2xpZW50T3B0aW9ucy5CdW5kbGVJRHMgPSBfLmlzU3RyaW5nKG9wdHMuYnVuZGxlSWRzKSA/IFtvcHRzLmJ1bmRsZUlkc10gOiBvcHRzLmJ1bmRsZUlkcztcbiAgICB9XG4gICAgaWYgKG9wdHMuYXBwbGljYXRpb25UeXBlKSB7XG4gICAgICByZXF1ZXN0LkNsaWVudE9wdGlvbnMuQXBwbGljYXRpb25UeXBlID0gb3B0cy5hcHBsaWNhdGlvblR5cGU7XG4gICAgfVxuICAgIGlmIChvcHRzLnJldHVybkF0dHJpYnV0ZXMpIHtcbiAgICAgIHJlcXVlc3QuQ2xpZW50T3B0aW9ucy5SZXR1cm5BdHRyaWJ1dGVzID0gb3B0cy5yZXR1cm5BdHRyaWJ1dGVzO1xuICAgIH1cblxuICAgIHRoaXMuX3BsaXN0U2VydmljZS5zZW5kUGxpc3QocmVxdWVzdCk7XG4gICAgY29uc3QgbWVzc2FnZXMgPSBhd2FpdCB0aGlzLl93YWl0TWVzc2FnZUNvbXBsZXRpb24oKTtcbiAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbWVzc2FnZXMpIHtcbiAgICAgIGlmIChtZXNzYWdlLkxvb2t1cFJlc3VsdCkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZS5Mb29rdXBSZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgTG9va3VwUmVzdWx0IGluIHRoZSByZXNwb25zZTogUmVzcG9uc2U6ICR7SlNPTi5zdHJpbmdpZnkobWVzc2FnZXMpfWApO1xuICB9XG5cbiAgLyoqXG4gICAqIFVuaW5zdGFsbHMgYW4gYXBwbGljYXRpb24gYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBidW5kbGVJZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gYnVuZGxlSWQgb2YgdGhlIGFwcCB0aGF0IG5lZWRzIHRvIGJlIHBhc3NlZCBmb3IgdW5pbnN0YWxsYXRpb25cbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVvdXQgVGhlIHRpbWVvdXQgYmV0d2VlbiBtZXNzYWdlcyByZWNlaXZlZCBmcm9tIHRoZSBwaG9uZSBhcyBzdGF0dXMgdXBkYXRlc1xuICAgKi9cbiAgYXN5bmMgdW5pbnN0YWxsQXBwbGljYXRpb24gKGJ1bmRsZUlkLCB0aW1lb3V0ID0gMjAwMDApIHtcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgQ29tbWFuZDogJ1VuaW5zdGFsbCcsXG4gICAgICBBcHBsaWNhdGlvbklkZW50aWZpZXI6IGJ1bmRsZUlkXG4gICAgfTtcblxuICAgIHRoaXMuX3BsaXN0U2VydmljZS5zZW5kUGxpc3QocmVxdWVzdCk7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuX3dhaXRNZXNzYWdlQ29tcGxldGlvbih0aW1lb3V0KTtcbiAgfVxuXG4gIGFzeW5jIF93YWl0TWVzc2FnZUNvbXBsZXRpb24gKHRpbWVvdXQpIHtcbiAgICBsZXQgbWVzc2FnZXMgPSBbXTtcbiAgICAvLyBKdXN0IGFkZGVkIGZvciBzYWZldHkuIFRoaXMgc2hvdWxkbid0IGhhcHBlblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7IGkrKykge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuX3BsaXN0U2VydmljZS5yZWNlaXZlUGxpc3QodGltZW91dCk7XG4gICAgICBtZXNzYWdlcy5wdXNoKGRhdGEpO1xuICAgICAgaWYgKHRoaXMuX2lzRmluaXNoZWQoZGF0YSkpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9pc0ZpbmlzaGVkIChyZXNwb25zZSkge1xuICAgIGlmIChyZXNwb25zZS5FcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmV4cGVjdGVkIGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpfWApO1xuICAgIH1cblxuICAgIGlmICghcmVzcG9uc2UuU3RhdHVzKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZS5TdGF0dXMgPT09ICdDb21wbGV0ZSc7XG4gIH1cbn1cblxuZXhwb3J0IHsgSW5zdGFsbGF0aW9uUHJveHlTZXJ2aWNlLCBJTlNUQUxMQVRJT05fUFJPWFlfU0VSVklDRV9OQU1FIH07XG5leHBvcnQgZGVmYXVsdCBJbnN0YWxsYXRpb25Qcm94eVNlcnZpY2U7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQU1BLE1BQU1BLCtCQUErQixHQUFHLHFDQUFxQztBQUFDO0FBRTlFLE1BQU1DLHdCQUF3QixTQUFTQyw2QkFBZ0IsQ0FBQztFQU90RCxNQUFNQyxrQkFBa0IsQ0FBRUMsSUFBSSxFQUFFQyxhQUFhLEdBQUcsQ0FBQyxDQUFDLEVBQUVDLE9BQU8sR0FBRyxLQUFLLEVBQUU7SUFDbkUsTUFBTUMsT0FBTyxHQUFHO01BQ2RDLE9BQU8sRUFBRSxTQUFTO01BQ2xCQyxXQUFXLEVBQUVMLElBQUk7TUFDakJNLGFBQWEsRUFBRUw7SUFDakIsQ0FBQztJQUVELElBQUksQ0FBQ00sYUFBYSxDQUFDQyxTQUFTLENBQUNMLE9BQU8sQ0FBQztJQUNyQyxPQUFPLE1BQU0sSUFBSSxDQUFDTSxzQkFBc0IsQ0FBQ1AsT0FBTyxDQUFDO0VBQ25EO0VBV0EsTUFBTVEsa0JBQWtCLENBQUVWLElBQUksRUFBRUMsYUFBYSxHQUFHLENBQUMsQ0FBQyxFQUFFQyxPQUFPLEdBQUcsS0FBSyxFQUFFO0lBQ25FLE1BQU1DLE9BQU8sR0FBRztN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