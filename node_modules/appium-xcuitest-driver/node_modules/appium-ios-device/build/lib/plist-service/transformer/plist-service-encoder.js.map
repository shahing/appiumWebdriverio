{"version":3,"file":"plist-service-encoder.js","names":["HEADER_LENGTH","PlistServiceEncoder","Stream","Transform","constructor","objectMode","_transform","data","encoding","onData","push","_encode","payloadBuffer","plist","createBinaryPlist","headerBuffer","Buffer","alloc","writeUInt32BE","length","concat"],"sources":["../../../../lib/plist-service/transformer/plist-service-encoder.js"],"sourcesContent":["import Stream from 'stream';\nimport { plist } from '@appium/support';\n\n\nconst HEADER_LENGTH = 4;\n\nclass PlistServiceEncoder extends Stream.Transform {\n  constructor () {\n    super({ objectMode: true });\n  }\n\n  _transform (data, encoding, onData) {\n    this.push(this._encode(data), 'buffer');\n    onData();\n  }\n\n  _encode (data) {\n    let payloadBuffer = plist.createBinaryPlist(data);\n    const headerBuffer = Buffer.alloc(HEADER_LENGTH);\n    headerBuffer.writeUInt32BE(payloadBuffer.length, 0);\n    return Buffer.concat([headerBuffer, payloadBuffer], headerBuffer.length + payloadBuffer.length);\n  }\n}\n\nexport { PlistServiceEncoder };\nexport default PlistServiceEncoder;\n"],"mappings":";;;;;;;;AAAA;AACA;AAGA,MAAMA,aAAa,GAAG,CAAC;AAEvB,MAAMC,mBAAmB,SAASC,eAAM,CAACC,SAAS,CAAC;EACjDC,WAAW,GAAI;IACb,KAAK,CAAC;MAAEC,UAAU,EAAE;IAAK,CAAC,CAAC;EAC7B;EAEAC,UAAU,CAAEC,IAAI,EAAEC,QAAQ,EAAEC,MAAM,EAAE;IAClC,IAAI,CAACC,IAAI,CAAC,IAAI,CAACC,OAAO,CAACJ,IAAI,CAAC,EAAE,QAAQ,CAAC;IACvCE,MAAM,EAAE;EACV;EAEAE,OAAO,CAAEJ,IAAI,EAAE;IACb,IAAIK,aAAa,GAAGC,cAAK,CAACC,iBAAiB,CAACP,IAAI,CAAC;IACjD,MAAMQ,YAAY,GAAGC,MAAM,CAACC,KAAK,CAACjB,aAAa,CAAC;IAChDe,YAAY,CAACG,aAAa,CAACN,aAAa,CAACO,MAAM,EAAE,CAAC,CAAC;IACnD,OAAOH,MAAM,CAACI,MAAM,CAAC,CAACL,YAAY,EAAEH,aAAa,CAAC,EAAEG,YAAY,CAACI,MAAM,GAAGP,aAAa,CAACO,MAAM,CAAC;EACjG;AACF;AAAC;AAAA,eAGclB,mBAAmB;AAAA"}