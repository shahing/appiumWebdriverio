"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
require("source-map-support/register");
var _simulatorXcode = require("./simulator-xcode-6");
var _simulatorXcode2 = _interopRequireDefault(require("./simulator-xcode-7"));
var _lodash = _interopRequireDefault(require("lodash"));
var _logger = _interopRequireDefault(require("./logger"));
var _teen_process = require("teen_process");
var _geolocation = require("./geolocation");
var _support = require("@appium/support");
var _utils = require("./utils");
const STARTUP_TIMEOUT = 120 * 1000;
class SimulatorXcode8 extends _simulatorXcode2.default {
  constructor(udid, xcodeVersion) {
    super(udid, xcodeVersion);
    this.isFreshFiles = ['Library/Cookies', 'Library/Preferences/.GlobalPreferences.plist', 'Library/Preferences/com.apple.springboard.plist', 'var/run/syslog.pid'];
    this._idb = null;
    this._locationMenu = 'Debug';
  }
  set idb(value) {
    this._idb = value;
  }
  get idb() {
    return this._idb;
  }
  async killUIClient(opts = {}) {
    let {
      pid,
      signal = 2
    } = opts;
    pid = pid || (await this.getUIClientPid());
    if (!pid) {
      return false;
    }
    _logger.default.debug(`Sending ${signal} kill signal to Simulator UI client with PID ${pid}`);
    try {
      await (0, _teen_process.exec)('kill', [`-${signal}`, pid]);
      return true;
    } catch (e) {
      if (e.code === 1) {
        return false;
      }
      throw new Error(`Cannot kill the Simulator UI client. Original error: ${e.message}`);
    }
  }
  async isAppInstalled(bundleId) {
    try {
      const appContainer = await this.simctl.getAppContainer(bundleId);
      return appContainer.endsWith('.app');
    } catch (err) {
      try {
        const info = await this.simctl.appInfo(bundleId);
        return info.includes('ApplicationType');
      } catch (e) {
        return false;
      }
    }
  }
  get startupTimeout() {
    return STARTUP_TIMEOUT;
  }
  async waitForBoot(startupTimeout) {
    await this.simctl.startBootMonitor({
      timeout: startupTimeout
    });
    this.emit(_simulatorXcode.BOOT_COMPLETED_EVENT);
  }
  async openUrl(url) {
    if (!(await this.isRunning())) {
      throw new Error(`Tried to open '${url}', but Simulator is not in Booted state`);
    }
    const timer = new _support.timing.Timer().start();
    try {
      await (0, _utils.launchApp)(this.simctl, _utils.MOBILE_SAFARI_BUNDLE_ID, _utils.SAFARI_STARTUP_TIMEOUT);
      await this.simctl.openUrl(url);
    } catch (err) {
      throw new Error(`Safari could not open '${url}' after ${timer.getDuration().asSeconds.toFixed(3)}s. ` + `Original error: ${err.stderr || err.message}`);
    }
    _logger.default.debug(`Safari successfully opened '${url}' in ${timer.getDuration().asSeconds.toFixed(3)}s`);
  }
  async cleanSafari(keepPrefs = true) {
    try {
      if (await this.isRunning()) {
        await this.simctl.terminateApp(_utils.MOBILE_SAFARI_BUNDLE_ID);
      }
    } catch (ign) {}
    await super.cleanSafari(keepPrefs);
  }
  async cleanCustomApp(appFile, appBundleId, scrub = false) {
    try {
      await this.simctl.terminateApp(appBundleId);
    } catch (ign) {}
    await super.cleanCustomApp(appFile, appBundleId, scrub);
  }
  async shake() {
    _logger.default.info(`Performing shake gesture on ${this.udid} Simulator`);
    await this.simctl.spawnProcess(['notifyutil', '-p', 'com.apple.UIKit.SimulatorShake']);
  }
  async isBiometricEnrolled() {
    const output = await this.executeUIClientScript(`
      tell application "System Events"
        tell process "Simulator"
          set dstMenuItem to menu item "Toggle Enrolled State" of menu 1 of menu item "Touch ID" of menu 1 of menu bar item "Hardware" of menu bar 1
          set isChecked to (value of attribute "AXMenuItemMarkChar" of dstMenuItem) is "✓"
        end tell
      end tell
    `);
    _logger.default.debug(`Touch ID enrolled state: ${output}`);
    return _lodash.default.isString(output) && output.trim() === 'true';
  }
  async enrollBiometric(isEnabled = true) {
    await this.executeUIClientScript(`
      tell application "System Events"
        tell process "Simulator"
          set dstMenuItem to menu item "Toggle Enrolled State" of menu 1 of menu item "Touch ID" of menu 1 of menu bar item "Hardware" of menu bar 1
          set isChecked to (value of attribute "AXMenuItemMarkChar" of dstMenuItem) is "✓"
          if ${isEnabled ? 'not ' : ''}isChecked then
            click dstMenuItem
          end if
        end tell
      end tell
    `);
  }
  async sendBiometricMatch(shouldMatch = true) {
    await this.executeUIClientScript(`
      tell application "System Events"
        tell process "Simulator"
          set dstMenuItem to menu item "${shouldMatch ? 'Matching Touch' : 'Non-matching Touch'}" of menu 1 of menu item "Touch ID" of menu 1 of menu bar item "Hardware" of menu bar 1
          click dstMenuItem
        end tell
      end tell
    `);
  }
  async setGeolocation(latitude, longitude) {
    const locationSetters = [async () => await (0, _geolocation.setLocationWithLyft)(this.udid, latitude, longitude), async () => await (0, _geolocation.setLocationWithIdb)(this.idb, latitude, longitude), async () => await (0, _geolocation.setLocationWithAppleScript)(this, latitude, longitude, this._locationMenu)];
    let lastError;
    for (const setter of locationSetters) {
      try {
        await setter();
        return true;
      } catch (e) {
        _logger.default.info(e.message);
        lastError = e;
      }
    }
    throw lastError;
  }
}
var _default = SimulatorXcode8;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTVEFSVFVQX1RJTUVPVVQiLCJTaW11bGF0b3JYY29kZTgiLCJTaW11bGF0b3JYY29kZTciLCJjb25zdHJ1Y3RvciIsInVkaWQiLCJ4Y29kZVZlcnNpb24iLCJpc0ZyZXNoRmlsZXMiLCJfaWRiIiwiX2xvY2F0aW9uTWVudSIsImlkYiIsInZhbHVlIiwia2lsbFVJQ2xpZW50Iiwib3B0cyIsInBpZCIsInNpZ25hbCIsImdldFVJQ2xpZW50UGlkIiwibG9nIiwiZGVidWciLCJleGVjIiwiZSIsImNvZGUiLCJFcnJvciIsIm1lc3NhZ2UiLCJpc0FwcEluc3RhbGxlZCIsImJ1bmRsZUlkIiwiYXBwQ29udGFpbmVyIiwic2ltY3RsIiwiZ2V0QXBwQ29udGFpbmVyIiwiZW5kc1dpdGgiLCJlcnIiLCJpbmZvIiwiYXBwSW5mbyIsImluY2x1ZGVzIiwic3RhcnR1cFRpbWVvdXQiLCJ3YWl0Rm9yQm9vdCIsInN0YXJ0Qm9vdE1vbml0b3IiLCJ0aW1lb3V0IiwiZW1pdCIsIkJPT1RfQ09NUExFVEVEX0VWRU5UIiwib3BlblVybCIsInVybCIsImlzUnVubmluZyIsInRpbWVyIiwidGltaW5nIiwiVGltZXIiLCJzdGFydCIsImxhdW5jaEFwcCIsIk1PQklMRV9TQUZBUklfQlVORExFX0lEIiwiU0FGQVJJX1NUQVJUVVBfVElNRU9VVCIsImdldER1cmF0aW9uIiwiYXNTZWNvbmRzIiwidG9GaXhlZCIsInN0ZGVyciIsImNsZWFuU2FmYXJpIiwia2VlcFByZWZzIiwidGVybWluYXRlQXBwIiwiaWduIiwiY2xlYW5DdXN0b21BcHAiLCJhcHBGaWxlIiwiYXBwQnVuZGxlSWQiLCJzY3J1YiIsInNoYWtlIiwic3Bhd25Qcm9jZXNzIiwiaXNCaW9tZXRyaWNFbnJvbGxlZCIsIm91dHB1dCIsImV4ZWN1dGVVSUNsaWVudFNjcmlwdCIsIl8iLCJpc1N0cmluZyIsInRyaW0iLCJlbnJvbGxCaW9tZXRyaWMiLCJpc0VuYWJsZWQiLCJzZW5kQmlvbWV0cmljTWF0Y2giLCJzaG91bGRNYXRjaCIsInNldEdlb2xvY2F0aW9uIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJsb2NhdGlvblNldHRlcnMiLCJzZXRMb2NhdGlvbldpdGhMeWZ0Iiwic2V0TG9jYXRpb25XaXRoSWRiIiwic2V0TG9jYXRpb25XaXRoQXBwbGVTY3JpcHQiLCJsYXN0RXJyb3IiLCJzZXR0ZXIiXSwic291cmNlcyI6WyIuLi8uLi9saWIvc2ltdWxhdG9yLXhjb2RlLTguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQk9PVF9DT01QTEVURURfRVZFTlQgfSBmcm9tICcuL3NpbXVsYXRvci14Y29kZS02JztcbmltcG9ydCBTaW11bGF0b3JYY29kZTcgZnJvbSAnLi9zaW11bGF0b3IteGNvZGUtNyc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGxvZyBmcm9tICcuL2xvZ2dlcic7XG5pbXBvcnQgeyBleGVjIH0gZnJvbSAndGVlbl9wcm9jZXNzJztcbmltcG9ydCB7XG4gIHNldExvY2F0aW9uV2l0aEx5ZnQsXG4gIHNldExvY2F0aW9uV2l0aElkYixcbiAgc2V0TG9jYXRpb25XaXRoQXBwbGVTY3JpcHQgfSBmcm9tICcuL2dlb2xvY2F0aW9uJztcbmltcG9ydCB7IHRpbWluZyB9IGZyb20gJ0BhcHBpdW0vc3VwcG9ydCc7XG5pbXBvcnQgeyBNT0JJTEVfU0FGQVJJX0JVTkRMRV9JRCwgU0FGQVJJX1NUQVJUVVBfVElNRU9VVCwgbGF1bmNoQXBwIH0gZnJvbSAnLi91dGlscyc7XG5cblxuLy8gdGhlc2Ugc2ltcyBhcmUgc2xvb29vb29vb3dcbmNvbnN0IFNUQVJUVVBfVElNRU9VVCA9IDEyMCAqIDEwMDA7XG5cbmNsYXNzIFNpbXVsYXRvclhjb2RlOCBleHRlbmRzIFNpbXVsYXRvclhjb2RlNyB7XG4gIGNvbnN0cnVjdG9yICh1ZGlkLCB4Y29kZVZlcnNpb24pIHtcbiAgICBzdXBlcih1ZGlkLCB4Y29kZVZlcnNpb24pO1xuXG4gICAgLy8gbGlzdCBvZiBmaWxlcyB0byBjaGVjayBmb3Igd2hlbiBzZWVpbmcgaWYgYSBzaW11bGF0b3IgaXMgXCJmcmVzaFwiXG4gICAgLy8gKG1lYW5pbmcgaXQgaGFzIG5ldmVyIGJlZW4gYm9vdGVkKS5cbiAgICAvLyBJZiB0aGVzZSBmaWxlcyBhcmUgcHJlc2VudCwgd2UgYXNzdW1lIGl0J3MgYmVlbiBzdWNjZXNzZnVsbHkgYm9vdGVkXG4gICAgdGhpcy5pc0ZyZXNoRmlsZXMgPSBbXG4gICAgICAnTGlicmFyeS9Db29raWVzJyxcbiAgICAgICdMaWJyYXJ5L1ByZWZlcmVuY2VzLy5HbG9iYWxQcmVmZXJlbmNlcy5wbGlzdCcsXG4gICAgICAnTGlicmFyeS9QcmVmZXJlbmNlcy9jb20uYXBwbGUuc3ByaW5nYm9hcmQucGxpc3QnLFxuICAgICAgJ3Zhci9ydW4vc3lzbG9nLnBpZCdcbiAgICBdO1xuICAgIHRoaXMuX2lkYiA9IG51bGw7XG5cbiAgICAvLyBmb3Igc2V0dGluZyB0aGUgbG9jYXRpb24gdXNpbmcgQXBwbGVTY3JpcHQsIHRoZSB0b3AtbGV2ZWwgbWVudSB0aHJvdWdoIHdoaWNoXG4gICAgLy8gdGhlICdMb2NhdGlvbicgb3B0aW9uIGlzIGZvdW5kXG4gICAgdGhpcy5fbG9jYXRpb25NZW51ID0gJ0RlYnVnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBJREIgaW5zdGFuY2Ugc2V0dGVyXG4gICAqXG4gICAqIEBwYXJhbSB7SURCfSB2YWx1ZVxuICAgKi9cbiAgc2V0IGlkYiAodmFsdWUpIHtcbiAgICB0aGlzLl9pZGIgPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtJREJ9IGlkYiBpbnN0YW5jZVxuICAgKi9cbiAgZ2V0IGlkYiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lkYjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBraWxsT3B0c1xuICAgKiBAcHJvcGVydHkgez9udW1iZXJ8c3RyaW5nfSBwaWQgLSBQcm9jZXNzIGlkIG9mIHRoZSBVSSBTaW11bGF0b3Igd2luZG93XG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfHN0cmluZ30gc2lnbmFsIFsyXSAtIFRoZSBzaWduYWwgbnVtYmVyIHRvIHNlbmQgdG8gdGhlXG4gICAqIGBraWxsYCBjb21tYW5kXG4gICAqL1xuXG4gIC8qKlxuICAgKiBLaWxsIHRoZSBVSSBjbGllbnQgaWYgaXQgaXMgcnVubmluZy5cbiAgICpcbiAgICogQHBhcmFtIHs/a2lsbE9wdHN9IG9wdHNcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgVUkgY2xpZW50IHdhcyBzdWNjZXNzZnVsbHkga2lsbGVkIG9yIGZhbHNlXG4gICAqICAgICAgICAgICAgICAgICAgIGlmIGl0IGlzIG5vdCBydW5uaW5nLlxuICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgc2VuZGluZyB0aGUgc2lnbmFsIHRvIHRoZSBjbGllbnQgcHJvY2VzcyBmYWlsc1xuICAgKi9cbiAgYXN5bmMga2lsbFVJQ2xpZW50IChvcHRzID0ge30pIHtcbiAgICBsZXQge1xuICAgICAgcGlkLFxuICAgICAgc2lnbmFsID0gMixcbiAgICB9ID0gb3B0cztcbiAgICBwaWQgPSBwaWQgfHwgYXdhaXQgdGhpcy5nZXRVSUNsaWVudFBpZCgpO1xuICAgIGlmICghcGlkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbG9nLmRlYnVnKGBTZW5kaW5nICR7c2lnbmFsfSBraWxsIHNpZ25hbCB0byBTaW11bGF0b3IgVUkgY2xpZW50IHdpdGggUElEICR7cGlkfWApO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBleGVjKCdraWxsJywgW2AtJHtzaWduYWx9YCwgcGlkXSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoZS5jb2RlID09PSAxKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGtpbGwgdGhlIFNpbXVsYXRvciBVSSBjbGllbnQuIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZ5IHdoZXRoZXIgdGhlIHBhcnRpY3VsYXIgYXBwbGljYXRpb24gaXMgaW5zdGFsbGVkIG9uIFNpbXVsYXRvci5cbiAgICogQG92ZXJyaWRlXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBidW5kbGVJZCAtIFRoZSBidW5kbGUgaWQgb2YgdGhlIGFwcGxpY2F0aW9uIHRvIGJlIGNoZWNrZWQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdpdmVuIGFwcGxpY2F0aW9uIGlzIGluc3RhbGxlZC5cbiAgICovXG4gIGFzeW5jIGlzQXBwSW5zdGFsbGVkIChidW5kbGVJZCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhcHBDb250YWluZXIgPSBhd2FpdCB0aGlzLnNpbWN0bC5nZXRBcHBDb250YWluZXIoYnVuZGxlSWQpO1xuICAgICAgcmV0dXJuIGFwcENvbnRhaW5lci5lbmRzV2l0aCgnLmFwcCcpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gZ2V0X2FwcF9jb250YWluZXIgc3ViY29tbWFuZCBmYWlscyBmb3Igc3lzdGVtIGFwcGxpY2F0aW9ucyxcbiAgICAgIC8vIHNvIHdlIHRyeSB0aGUgaGlkZGVuIGFwcGluZm8gc3ViY29tbWFuZCwgd2hpY2ggcHJpbnRzIGNvcnJlY3QgaW5mbyBmb3JcbiAgICAgIC8vIHN5c3RlbS9oaWRkZW4gYXBwc1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW5mbyA9IGF3YWl0IHRoaXMuc2ltY3RsLmFwcEluZm8oYnVuZGxlSWQpO1xuICAgICAgICByZXR1cm4gaW5mby5pbmNsdWRlcygnQXBwbGljYXRpb25UeXBlJyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4IG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gd2FpdCB1bnRpbCBTaW11bGF0b3IgYm9vdGluZyBpcyBjb21wbGV0ZWQuXG4gICAqL1xuICBnZXQgc3RhcnR1cFRpbWVvdXQgKCkge1xuICAgIHJldHVybiBTVEFSVFVQX1RJTUVPVVQ7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZ5IHdoZXRoZXIgdGhlIFNpbXVsYXRvciBib290aW5nIGlzIGNvbXBsZXRlZCBhbmQvb3Igd2FpdCBmb3IgaXRcbiAgICogdW50aWwgdGhlIHRpbWVvdXQgZXhwaXJlcy5cbiAgICogQG92ZXJyaWRlXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydHVwVGltZW91dCAtIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHdhaXQgdW50aWwgYm9vdGluZyBpcyBjb21wbGV0ZWQuXG4gICAqIEBlbWl0cyBCT09UX0NPTVBMRVRFRF9FVkVOVCBpZiB0aGUgY3VycmVudCBTaW11bGF0b3IgaXMgcmVhZHkgdG8gYWNjZXB0IHNpbWN0bCBjb21tYW5kcywgbGlrZSAnaW5zdGFsbCcuXG4gICAqL1xuICBhc3luYyB3YWl0Rm9yQm9vdCAoc3RhcnR1cFRpbWVvdXQpIHtcbiAgICBhd2FpdCB0aGlzLnNpbWN0bC5zdGFydEJvb3RNb25pdG9yKHt0aW1lb3V0OiBzdGFydHVwVGltZW91dH0pO1xuICAgIHRoaXMuZW1pdChCT09UX0NPTVBMRVRFRF9FVkVOVCk7XG4gIH1cblxuICAvKipcbiAgICogT3BlbiB0aGUgZ2l2ZW4gVVJMIGluIG1vYmlsZSBTYWZhcmkgYnJvd3Nlci5cbiAgICogVGhlIGJyb3dzZXIgd2lsbCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHkgaWYgaXQgaXMgbm90IHJ1bm5pbmcuXG4gICAqIEBvdmVycmlkZVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gVGhlIFVSTCB0byBiZSBvcGVuZWQuXG4gICAqL1xuICBhc3luYyBvcGVuVXJsICh1cmwpIHtcbiAgICBpZiAoIWF3YWl0IHRoaXMuaXNSdW5uaW5nKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVHJpZWQgdG8gb3BlbiAnJHt1cmx9JywgYnV0IFNpbXVsYXRvciBpcyBub3QgaW4gQm9vdGVkIHN0YXRlYCk7XG4gICAgfVxuICAgIGNvbnN0IHRpbWVyID0gbmV3IHRpbWluZy5UaW1lcigpLnN0YXJ0KCk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGxhdW5jaEFwcCh0aGlzLnNpbWN0bCwgTU9CSUxFX1NBRkFSSV9CVU5ETEVfSUQsIFNBRkFSSV9TVEFSVFVQX1RJTUVPVVQpO1xuICAgICAgYXdhaXQgdGhpcy5zaW1jdGwub3BlblVybCh1cmwpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTYWZhcmkgY291bGQgbm90IG9wZW4gJyR7dXJsfScgYWZ0ZXIgJHt0aW1lci5nZXREdXJhdGlvbigpLmFzU2Vjb25kcy50b0ZpeGVkKDMpfXMuIGAgK1xuICAgICAgICBgT3JpZ2luYWwgZXJyb3I6ICR7ZXJyLnN0ZGVyciB8fCBlcnIubWVzc2FnZX1gKTtcbiAgICB9XG4gICAgbG9nLmRlYnVnKGBTYWZhcmkgc3VjY2Vzc2Z1bGx5IG9wZW5lZCAnJHt1cmx9JyBpbiAke3RpbWVyLmdldER1cmF0aW9uKCkuYXNTZWNvbmRzLnRvRml4ZWQoMyl9c2ApO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIHVwIHRoZSBkaXJlY3RvcmllcyBmb3IgbW9iaWxlIFNhZmFyaS5cbiAgICogQG92ZXJyaWRlXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0ga2VlcFByZWZzIC0gV2hldGhlciB0byBrZWVwIFNhZmFyaSBwcmVmZXJlbmNlcyBmcm9tIGJlaW5nIGRlbGV0ZWQuXG4gICAqL1xuICBhc3luYyBjbGVhblNhZmFyaSAoa2VlcFByZWZzID0gdHJ1ZSkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoYXdhaXQgdGhpcy5pc1J1bm5pbmcoKSkge1xuICAgICAgICBhd2FpdCB0aGlzLnNpbWN0bC50ZXJtaW5hdGVBcHAoTU9CSUxFX1NBRkFSSV9CVU5ETEVfSUQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGlnbikge1xuICAgICAgLy8gaWdub3JlIGVycm9yXG4gICAgfVxuICAgIGF3YWl0IHN1cGVyLmNsZWFuU2FmYXJpKGtlZXBQcmVmcyk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4vc2NydWIgdGhlIHBhcnRpY3VsYXIgYXBwbGljYXRpb24gb24gU2ltdWxhdG9yLlxuICAgKiBAb3ZlcnJpZGVcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFwcEZpbGUgLSBBcHBsaWNhdGlvbiBuYW1lIG1pbnVzIFwiLmFwcFwiLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXBwQnVuZGxlSWQgLSBCdW5kbGUgaWRlbnRpZmllciBvZiB0aGUgYXBwbGljYXRpb24uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2NydWIgLSBJZiBgc2NydWJgIGlzIGZhbHNlLCB3ZSB3YW50IHRvIGNsZWFuIGJ5IGRlbGV0aW5nIHRoZSBhcHAgYW5kIGFsbFxuICAgKiAgIGZpbGVzIGFzc29jaWF0ZWQgd2l0aCBpdC4gSWYgYHNjcnViYCBpcyB0cnVlLCB3ZSBqdXN0IHdhbnQgdG8gZGVsZXRlIHRoZSBwcmVmZXJlbmNlcyBhbmRcbiAgICogICBjaGFuZ2VkIGZpbGVzLlxuICAgKi9cbiAgYXN5bmMgY2xlYW5DdXN0b21BcHAgKGFwcEZpbGUsIGFwcEJ1bmRsZUlkLCBzY3J1YiA9IGZhbHNlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuc2ltY3RsLnRlcm1pbmF0ZUFwcChhcHBCdW5kbGVJZCk7XG4gICAgfSBjYXRjaCAoaWduKSB7XG4gICAgICAvLyBpZ25vcmUgZXJyb3JcbiAgICB9XG4gICAgYXdhaXQgc3VwZXIuY2xlYW5DdXN0b21BcHAoYXBwRmlsZSwgYXBwQnVuZGxlSWQsIHNjcnViKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIFNoYWtlIGdlc3R1cmUgb24gU2ltdWxhdG9yIHdpbmRvdy5cbiAgICovXG4gIGFzeW5jIHNoYWtlICgpIHtcbiAgICBsb2cuaW5mbyhgUGVyZm9ybWluZyBzaGFrZSBnZXN0dXJlIG9uICR7dGhpcy51ZGlkfSBTaW11bGF0b3JgKTtcbiAgICBhd2FpdCB0aGlzLnNpbWN0bC5zcGF3blByb2Nlc3MoW1xuICAgICAgJ25vdGlmeXV0aWwnLFxuICAgICAgJy1wJywgJ2NvbS5hcHBsZS5VSUtpdC5TaW11bGF0b3JTaGFrZSdcbiAgICBdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdGRvY1xuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGFzeW5jIGlzQmlvbWV0cmljRW5yb2xsZWQgKCkge1xuICAgIGNvbnN0IG91dHB1dCA9IGF3YWl0IHRoaXMuZXhlY3V0ZVVJQ2xpZW50U2NyaXB0KGBcbiAgICAgIHRlbGwgYXBwbGljYXRpb24gXCJTeXN0ZW0gRXZlbnRzXCJcbiAgICAgICAgdGVsbCBwcm9jZXNzIFwiU2ltdWxhdG9yXCJcbiAgICAgICAgICBzZXQgZHN0TWVudUl0ZW0gdG8gbWVudSBpdGVtIFwiVG9nZ2xlIEVucm9sbGVkIFN0YXRlXCIgb2YgbWVudSAxIG9mIG1lbnUgaXRlbSBcIlRvdWNoIElEXCIgb2YgbWVudSAxIG9mIG1lbnUgYmFyIGl0ZW0gXCJIYXJkd2FyZVwiIG9mIG1lbnUgYmFyIDFcbiAgICAgICAgICBzZXQgaXNDaGVja2VkIHRvICh2YWx1ZSBvZiBhdHRyaWJ1dGUgXCJBWE1lbnVJdGVtTWFya0NoYXJcIiBvZiBkc3RNZW51SXRlbSkgaXMgXCLinJNcIlxuICAgICAgICBlbmQgdGVsbFxuICAgICAgZW5kIHRlbGxcbiAgICBgKTtcbiAgICBsb2cuZGVidWcoYFRvdWNoIElEIGVucm9sbGVkIHN0YXRlOiAke291dHB1dH1gKTtcbiAgICByZXR1cm4gXy5pc1N0cmluZyhvdXRwdXQpICYmIG91dHB1dC50cmltKCkgPT09ICd0cnVlJztcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdGRvY1xuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGFzeW5jIGVucm9sbEJpb21ldHJpYyAoaXNFbmFibGVkID0gdHJ1ZSkge1xuICAgIGF3YWl0IHRoaXMuZXhlY3V0ZVVJQ2xpZW50U2NyaXB0KGBcbiAgICAgIHRlbGwgYXBwbGljYXRpb24gXCJTeXN0ZW0gRXZlbnRzXCJcbiAgICAgICAgdGVsbCBwcm9jZXNzIFwiU2ltdWxhdG9yXCJcbiAgICAgICAgICBzZXQgZHN0TWVudUl0ZW0gdG8gbWVudSBpdGVtIFwiVG9nZ2xlIEVucm9sbGVkIFN0YXRlXCIgb2YgbWVudSAxIG9mIG1lbnUgaXRlbSBcIlRvdWNoIElEXCIgb2YgbWVudSAxIG9mIG1lbnUgYmFyIGl0ZW0gXCJIYXJkd2FyZVwiIG9mIG1lbnUgYmFyIDFcbiAgICAgICAgICBzZXQgaXNDaGVja2VkIHRvICh2YWx1ZSBvZiBhdHRyaWJ1dGUgXCJBWE1lbnVJdGVtTWFya0NoYXJcIiBvZiBkc3RNZW51SXRlbSkgaXMgXCLinJNcIlxuICAgICAgICAgIGlmICR7aXNFbmFibGVkID8gJ25vdCAnIDogJyd9aXNDaGVja2VkIHRoZW5cbiAgICAgICAgICAgIGNsaWNrIGRzdE1lbnVJdGVtXG4gICAgICAgICAgZW5kIGlmXG4gICAgICAgIGVuZCB0ZWxsXG4gICAgICBlbmQgdGVsbFxuICAgIGApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0ZG9jXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgYXN5bmMgc2VuZEJpb21ldHJpY01hdGNoIChzaG91bGRNYXRjaCA9IHRydWUpIHtcbiAgICBhd2FpdCB0aGlzLmV4ZWN1dGVVSUNsaWVudFNjcmlwdChgXG4gICAgICB0ZWxsIGFwcGxpY2F0aW9uIFwiU3lzdGVtIEV2ZW50c1wiXG4gICAgICAgIHRlbGwgcHJvY2VzcyBcIlNpbXVsYXRvclwiXG4gICAgICAgICAgc2V0IGRzdE1lbnVJdGVtIHRvIG1lbnUgaXRlbSBcIiR7c2hvdWxkTWF0Y2ggPyAnTWF0Y2hpbmcgVG91Y2gnIDogJ05vbi1tYXRjaGluZyBUb3VjaCd9XCIgb2YgbWVudSAxIG9mIG1lbnUgaXRlbSBcIlRvdWNoIElEXCIgb2YgbWVudSAxIG9mIG1lbnUgYmFyIGl0ZW0gXCJIYXJkd2FyZVwiIG9mIG1lbnUgYmFyIDFcbiAgICAgICAgICBjbGljayBkc3RNZW51SXRlbVxuICAgICAgICBlbmQgdGVsbFxuICAgICAgZW5kIHRlbGxcbiAgICBgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgY3VzdG9tIGdlb2xvY2F0aW9uIHBhcmFtZXRlcnMgZm9yIHRoZSBnaXZlbiBTaW11bGF0b3IgdXNpbmcgQXBwbGVTY3JpcHQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gbGF0aXR1ZGUgLSBUaGUgbGF0aXR1ZGUgdmFsdWUsIHdoaWNoIGlzIGdvaW5nIHRvIGJlIGVudGVyZWRcbiAgICogICBpbnRvIHRoZSBjb3JyZXNwb25kaW5nIGVkaXQgZmllbGQsIGZvciBleGFtcGxlICczOSwwMDA2Jy5cbiAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBsb25naXR1ZGUgLSBUaGUgbG9uZ2l0dWRlIHZhbHVlLCB3aGljaCBpcyBnb2luZyB0byBiZSBlbnRlcmVkXG4gICAqICAgaW50byB0aGUgY29ycmVzcG9uZGluZyBlZGl0IGZpZWxkLCBmb3IgZXhhbXBsZSAnMTksMDA2OCcuXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBnaXZlbiBwYXJhbWV0ZXJzIGhhdmUgY29ycmVjdCBmb3JtYXQgYW5kIHdlcmUgc3VjY2Vzc2Z1bGx5IGFjY2VwdGVkLlxuICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIHNldHRpbmcgdGhlIGxvY2F0aW9uXG4gICAqL1xuICBhc3luYyBzZXRHZW9sb2NhdGlvbiAobGF0aXR1ZGUsIGxvbmdpdHVkZSkge1xuICAgIGNvbnN0IGxvY2F0aW9uU2V0dGVycyA9IFtcbiAgICAgIGFzeW5jICgpID0+IGF3YWl0IHNldExvY2F0aW9uV2l0aEx5ZnQodGhpcy51ZGlkLCBsYXRpdHVkZSwgbG9uZ2l0dWRlKSxcbiAgICAgIGFzeW5jICgpID0+IGF3YWl0IHNldExvY2F0aW9uV2l0aElkYih0aGlzLmlkYiwgbGF0aXR1ZGUsIGxvbmdpdHVkZSksXG4gICAgICBhc3luYyAoKSA9PiBhd2FpdCBzZXRMb2NhdGlvbldpdGhBcHBsZVNjcmlwdCh0aGlzLCBsYXRpdHVkZSwgbG9uZ2l0dWRlLCB0aGlzLl9sb2NhdGlvbk1lbnUpLFxuICAgIF07XG5cbiAgICBsZXQgbGFzdEVycm9yO1xuICAgIGZvciAoY29uc3Qgc2V0dGVyIG9mIGxvY2F0aW9uU2V0dGVycykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgc2V0dGVyKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBsb2cuaW5mbyhlLm1lc3NhZ2UpO1xuICAgICAgICBsYXN0RXJyb3IgPSBlO1xuICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBsYXN0RXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2ltdWxhdG9yWGNvZGU4O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFJQSxNQUFNQSxlQUFlLEdBQUcsR0FBRyxHQUFHLElBQUk7QUFFbEMsTUFBTUMsZUFBZSxTQUFTQyx3QkFBZSxDQUFDO0VBQzVDQyxXQUFXLENBQUVDLElBQUksRUFBRUMsWUFBWSxFQUFFO0lBQy9CLEtBQUssQ0FBQ0QsSUFBSSxFQUFFQyxZQUFZLENBQUM7SUFLekIsSUFBSSxDQUFDQyxZQUFZLEdBQUcsQ0FDbEIsaUJBQWlCLEVBQ2pCLDhDQUE4QyxFQUM5QyxpREFBaUQsRUFDakQsb0JBQW9CLENBQ3JCO0lBQ0QsSUFBSSxDQUFDQyxJQUFJLEdBQUcsSUFBSTtJQUloQixJQUFJLENBQUNDLGFBQWEsR0FBRyxPQUFPO0VBQzlCO0VBT0EsSUFBSUMsR0FBRyxDQUFFQyxLQUFLLEVBQUU7SUFDZCxJQUFJLENBQUNILElBQUksR0FBR0csS0FBSztFQUNuQjtFQUtBLElBQUlELEdBQUcsR0FBSTtJQUNU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