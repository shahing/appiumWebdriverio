"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.SecureValuesPreprocessor = exports.SECURE_VALUES_PREPROCESSOR = void 0;

require("source-map-support/register");

var _fs = _interopRequireDefault(require("./fs"));

var _lodash = _interopRequireDefault(require("lodash"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const DEFAULT_REPLACER = '**SECURE**';

class SecureValuesPreprocessor {
  constructor() {
    this._rules = [];
  }

  get rules() {
    return this._rules;
  }

  parseRule(rule) {
    let pattern;
    let replacer = DEFAULT_REPLACER;
    let flags = ['g'];

    if (_lodash.default.isString(rule)) {
      if (rule.length === 0) {
        throw new Error(`${JSON.stringify(rule)} -> The value must not be empty`);
      }

      pattern = `\\b${_lodash.default.escapeRegExp(rule)}\\b`;
    } else if (_lodash.default.isPlainObject(rule)) {
      if (_lodash.default.has(rule, 'pattern')) {
        if (!_lodash.default.isString(rule.pattern) || rule.pattern.length === 0) {
          throw new Error(`${JSON.stringify(rule)} -> The value of 'pattern' must be a valid non-empty string`);
        }

        pattern = rule.pattern;
      } else if (_lodash.default.has(rule, 'text')) {
        if (!_lodash.default.isString(rule.text) || rule.text.length === 0) {
          throw new Error(`${JSON.stringify(rule)} -> The value of 'text' must be a valid non-empty string`);
        }

        pattern = `\\b${_lodash.default.escapeRegExp(rule.text)}\\b`;
      }

      if (!pattern) {
        throw new Error(`${JSON.stringify(rule)} -> Must either have a field named 'pattern' or 'text'`);
      }

      if (_lodash.default.has(rule, 'flags')) {
        for (const flag of ['i', 'g', 'm', 's', 'u', 'y']) {
          if (_lodash.default.includes(rule.flags, flag)) {
            flags.push(flag);
          }
        }

        flags = _lodash.default.uniq(flags);
      }

      if (_lodash.default.isString(rule.replacer)) {
        replacer = rule.replacer;
      }
    } else {
      throw new Error(`${JSON.stringify(rule)} -> Must either be a string or an object`);
    }

    return {
      pattern: new RegExp(pattern, flags.join('')),
      replacer
    };
  }

  async loadRules(source) {
    let rules;

    if (_lodash.default.isArray(source)) {
      rules = source;
    } else {
      if (!(await _fs.default.exists(source))) {
        throw new Error(`'${source}' does not exist or is not accessible`);
      }

      try {
        rules = JSON.parse(await _fs.default.readFile(source, 'utf8'));
      } catch (e) {
        throw new Error(`'${source}' must be a valid JSON file. Original error: ${e.message}`);
      }

      if (!_lodash.default.isArray(rules)) {
        throw new Error(`'${source}' must contain a valid JSON array`);
      }
    }

    const issues = [];
    this._rules = [];

    for (const rule of rules) {
      try {
        this._rules.push(this.parseRule(rule));
      } catch (e) {
        issues.push(e.message);
      }
    }

    return issues;
  }

  preprocess(str) {
    if (this._rules.length === 0 || !_lodash.default.isString(str)) {
      return str;
    }

    let result = str;

    for (const rule of this._rules) {
      result = result.replace(rule.pattern, rule.replacer);
    }

    return result;
  }

}

exports.SecureValuesPreprocessor = SecureValuesPreprocessor;
const SECURE_VALUES_PREPROCESSOR = new SecureValuesPreprocessor();
exports.SECURE_VALUES_PREPROCESSOR = SECURE_VALUES_PREPROCESSOR;
var _default = SECURE_VALUES_PREPROCESSOR;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJERUZBVUxUX1JFUExBQ0VSIiwiU2VjdXJlVmFsdWVzUHJlcHJvY2Vzc29yIiwiY29uc3RydWN0b3IiLCJfcnVsZXMiLCJydWxlcyIsInBhcnNlUnVsZSIsInJ1bGUiLCJwYXR0ZXJuIiwicmVwbGFjZXIiLCJmbGFncyIsIl8iLCJpc1N0cmluZyIsImxlbmd0aCIsIkVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsImVzY2FwZVJlZ0V4cCIsImlzUGxhaW5PYmplY3QiLCJoYXMiLCJ0ZXh0IiwiZmxhZyIsImluY2x1ZGVzIiwicHVzaCIsInVuaXEiLCJSZWdFeHAiLCJqb2luIiwibG9hZFJ1bGVzIiwic291cmNlIiwiaXNBcnJheSIsImZzIiwiZXhpc3RzIiwicGFyc2UiLCJyZWFkRmlsZSIsImUiLCJtZXNzYWdlIiwiaXNzdWVzIiwicHJlcHJvY2VzcyIsInN0ciIsInJlc3VsdCIsInJlcGxhY2UiLCJTRUNVUkVfVkFMVUVTX1BSRVBST0NFU1NPUiJdLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9sb2ctaW50ZXJuYWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJy4vZnMnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuY29uc3QgREVGQVVMVF9SRVBMQUNFUiA9ICcqKlNFQ1VSRSoqJztcblxuY2xhc3MgU2VjdXJlVmFsdWVzUHJlcHJvY2Vzc29yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fcnVsZXMgPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7QXJyYXk8U2VjdXJlVmFsdWVQcmVwcm9jZXNzaW5nUnVsZT59IFRoZSBsaXN0IG9mIHN1Y2Nlc3NmdWxseVxuICAgKiBwYXJzZWQgcHJlcHJvY2Vzc2luZyBydWxlc1xuICAgKi9cbiAgZ2V0IHJ1bGVzKCkge1xuICAgIHJldHVybiB0aGlzLl9ydWxlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgc2luZ2xlIHJ1bGUgZnJvbSB0aGUgZ2l2ZW4gSlNPTiBmaWxlXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfFJ1bGV9IHJ1bGUgVGhlIHJ1bGUgbWlnaHQgZWl0aGVyIGJlIHJlcHJlc2VudGVkIGFzIGEgc2luZ2xlIHN0cmluZ1xuICAgKiBvciBhIGNvbmZpZ3VyYXRpb24gb2JqZWN0XG4gICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGVyZSB3YXMgYW4gZXJyb3Igd2hpbGUgcGFyc2luZyB0aGUgcnVsZVxuICAgKiBAcmV0dXJucyB7U2VjdXJlVmFsdWVQcmVwcm9jZXNzaW5nUnVsZX0gVGhlIHBhcnNlZCBydWxlXG4gICAqL1xuICBwYXJzZVJ1bGUocnVsZSkge1xuICAgIGxldCBwYXR0ZXJuO1xuICAgIGxldCByZXBsYWNlciA9IERFRkFVTFRfUkVQTEFDRVI7XG4gICAgbGV0IGZsYWdzID0gWydnJ107XG4gICAgaWYgKF8uaXNTdHJpbmcocnVsZSkpIHtcbiAgICAgIGlmIChydWxlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7SlNPTi5zdHJpbmdpZnkocnVsZSl9IC0+IFRoZSB2YWx1ZSBtdXN0IG5vdCBiZSBlbXB0eWApO1xuICAgICAgfVxuICAgICAgcGF0dGVybiA9IGBcXFxcYiR7Xy5lc2NhcGVSZWdFeHAocnVsZSl9XFxcXGJgO1xuICAgIH0gZWxzZSBpZiAoXy5pc1BsYWluT2JqZWN0KHJ1bGUpKSB7XG4gICAgICBpZiAoXy5oYXMocnVsZSwgJ3BhdHRlcm4nKSkge1xuICAgICAgICBpZiAoIV8uaXNTdHJpbmcocnVsZS5wYXR0ZXJuKSB8fCBydWxlLnBhdHRlcm4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYCR7SlNPTi5zdHJpbmdpZnkocnVsZSl9IC0+IFRoZSB2YWx1ZSBvZiAncGF0dGVybicgbXVzdCBiZSBhIHZhbGlkIG5vbi1lbXB0eSBzdHJpbmdgXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBwYXR0ZXJuID0gcnVsZS5wYXR0ZXJuO1xuICAgICAgfSBlbHNlIGlmIChfLmhhcyhydWxlLCAndGV4dCcpKSB7XG4gICAgICAgIGlmICghXy5pc1N0cmluZyhydWxlLnRleHQpIHx8IHJ1bGUudGV4dC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgJHtKU09OLnN0cmluZ2lmeShydWxlKX0gLT4gVGhlIHZhbHVlIG9mICd0ZXh0JyBtdXN0IGJlIGEgdmFsaWQgbm9uLWVtcHR5IHN0cmluZ2BcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHBhdHRlcm4gPSBgXFxcXGIke18uZXNjYXBlUmVnRXhwKHJ1bGUudGV4dCl9XFxcXGJgO1xuICAgICAgfVxuICAgICAgaWYgKCFwYXR0ZXJuKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgJHtKU09OLnN0cmluZ2lmeShydWxlKX0gLT4gTXVzdCBlaXRoZXIgaGF2ZSBhIGZpZWxkIG5hbWVkICdwYXR0ZXJuJyBvciAndGV4dCdgXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmIChfLmhhcyhydWxlLCAnZmxhZ3MnKSkge1xuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0d1aWRlL1JlZ3VsYXJfRXhwcmVzc2lvbnMjQWR2YW5jZWRfc2VhcmNoaW5nX3dpdGhfZmxhZ3NfMlxuICAgICAgICBmb3IgKGNvbnN0IGZsYWcgb2YgWydpJywgJ2cnLCAnbScsICdzJywgJ3UnLCAneSddKSB7XG4gICAgICAgICAgaWYgKF8uaW5jbHVkZXMocnVsZS5mbGFncywgZmxhZykpIHtcbiAgICAgICAgICAgIGZsYWdzLnB1c2goZmxhZyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZsYWdzID0gXy51bmlxKGZsYWdzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKF8uaXNTdHJpbmcocnVsZS5yZXBsYWNlcikpIHtcbiAgICAgICAgcmVwbGFjZXIgPSBydWxlLnJlcGxhY2VyO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7SlNPTi5zdHJpbmdpZnkocnVsZSl9IC0+IE11c3QgZWl0aGVyIGJlIGEgc3RyaW5nIG9yIGFuIG9iamVjdGApO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBwYXR0ZXJuOiBuZXcgUmVnRXhwKHBhdHRlcm4sIGZsYWdzLmpvaW4oJycpKSxcbiAgICAgIHJlcGxhY2VyLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogTG9hZHMgcnVsZXMgZnJvbSB0aGUgZ2l2ZW4gSlNPTiBmaWxlXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfFJ1bGVbXX0gc291cmNlIFRoZSBmdWxsIHBhdGggdG8gdGhlIEpTT04gZmlsZSBjb250YWluaW5nIHNlY3VyZVxuICAgKiB2YWx1ZXMgcmVwbGFjZW1lbnQgcnVsZXMgb3IgdGhlIHJ1bGVzIHRoZW1zZWx2ZXMgcmVwcmVzZW50ZWQgYXMgYW4gYXJyYXlcbiAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBmb3JtYXQgb2YgdGhlIHNvdXJjZSBmaWxlIGlzIGludmFsaWQgb3JcbiAgICogaXQgZG9lcyBub3QgZXhpc3RcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nW10+fSBUaGUgbGlzdCBvZiBpc3N1ZXMgZm91bmQgd2hpbGUgcGFyc2luZyBlYWNoIHJ1bGUuXG4gICAqIEFuIGVtcHR5IGxpc3QgaXMgcmV0dXJuZWQgaWYgbm8gcnVsZSBwYXJzaW5nIGlzc3VlcyB3ZXJlIGZvdW5kXG4gICAqL1xuICBhc3luYyBsb2FkUnVsZXMoc291cmNlKSB7XG4gICAgbGV0IHJ1bGVzO1xuICAgIGlmIChfLmlzQXJyYXkoc291cmNlKSkge1xuICAgICAgcnVsZXMgPSBzb3VyY2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghKGF3YWl0IGZzLmV4aXN0cyhzb3VyY2UpKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke3NvdXJjZX0nIGRvZXMgbm90IGV4aXN0IG9yIGlzIG5vdCBhY2Nlc3NpYmxlYCk7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBydWxlcyA9IEpTT04ucGFyc2UoYXdhaXQgZnMucmVhZEZpbGUoc291cmNlLCAndXRmOCcpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnJHtzb3VyY2V9JyBtdXN0IGJlIGEgdmFsaWQgSlNPTiBmaWxlLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICB9XG4gICAgICBpZiAoIV8uaXNBcnJheShydWxlcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnJHtzb3VyY2V9JyBtdXN0IGNvbnRhaW4gYSB2YWxpZCBKU09OIGFycmF5YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaXNzdWVzID0gW107XG4gICAgdGhpcy5fcnVsZXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHJ1bGUgb2YgcnVsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuX3J1bGVzLnB1c2godGhpcy5wYXJzZVJ1bGUocnVsZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpc3N1ZXMucHVzaChlLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaXNzdWVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIHNlY3VyZSB2YWx1ZXMgcmVwbGFjZW1lbnQgaW5zaWRlIHRoZSBnaXZlbiBzdHJpbmdcbiAgICogYWNjb3JkaW5nIHRvIHRoZSBwcmV2aW91c2x5IGxvYWRlZCBydWxlcy4gTm8gcmVwbGFjZW1lbnQgaXMgbWFkZVxuICAgKiBpZiB0aGVyZSBhcmUgbm8gcnVsZXMgb3IgdGhlIGdpdmVuIHZhbHVlIGlzIG5vdCBhIHN0cmluZ1xuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyIFRoZSBzdHJpbmcgdG8gbWFrZSByZXBsYWNlbWVudHMgaW5cbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIHN0cmluZyB3aXRoIHJlcGxhY2VtZW50cyBtYWRlXG4gICAqL1xuICBwcmVwcm9jZXNzKHN0cikge1xuICAgIGlmICh0aGlzLl9ydWxlcy5sZW5ndGggPT09IDAgfHwgIV8uaXNTdHJpbmcoc3RyKSkge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0ID0gc3RyO1xuICAgIGZvciAoY29uc3QgcnVsZSBvZiB0aGlzLl9ydWxlcykge1xuICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UocnVsZS5wYXR0ZXJuLCBydWxlLnJlcGxhY2VyKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuXG5jb25zdCBTRUNVUkVfVkFMVUVTX1BSRVBST0NFU1NPUiA9IG5ldyBTZWN1cmVWYWx1ZXNQcmVwcm9jZXNzb3IoKTtcblxuZXhwb3J0IHtTRUNVUkVfVkFMVUVTX1BSRVBST0NFU1NPUiwgU2VjdXJlVmFsdWVzUHJlcHJvY2Vzc29yfTtcbmV4cG9ydCBkZWZhdWx0IFNFQ1VSRV9WQUxVRVNfUFJFUFJPQ0VTU09SO1xuXG4vKipcbiAqIEB0eXBlZGVmIFJ1bGVcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwYXR0ZXJuIEEgdmFsaWQgUmVnRXhwIHBhdHRlcm4gdG8gYmUgcmVwbGFjZWRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0ZXh0IEEgdGV4dCBtYXRjaCB0byByZXBsYWNlLiBFaXRoZXIgdGhpcyBwcm9wZXJ0eSBvciB0aGVcbiAqIGFib3ZlIG9uZSBtdXN0IGJlIHByb3ZpZGVkLiBgcGF0dGVybmAgaGFzIHByaW9yaXR5IG92ZXIgYHRleHRgIGlmIGJvdGggYXJlIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtmbGFnc10gUmVndWxhciBleHByZXNzaW9uIGZsYWdzIGZvciB0aGUgZ2l2ZW4gcGF0dGVybi5cbiAqIFN1cHBvcnRlZCBmbGFnIGFyZSB0aGUgc2FtZSBhcyBmb3IgdGhlIHN0YW5kYXJkIEphdmFTY3JpcHQgUmVnRXhwIGNvbnN0cnVjdG9yOlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9HdWlkZS9SZWd1bGFyX0V4cHJlc3Npb25zI0FkdmFuY2VkX3NlYXJjaGluZ193aXRoX2ZsYWdzXzJcbiAqIFRoZSAnZycgKGdsb2JhbCBtYXRjaGluZykgaXMgYWx3YXlzIGVuYWJsZWQgdGhvdWdoLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtyZXBsYWNlcl0gVGhlIHJlcGxhY2VyIHZhbHVlIHRvIHVzZS4gQnkgZGVmYXVsdFxuICogZXF1YWxzIHRvIGBERUZBVUxUX1NFQ1VSRV9SRVBMQUNFUmBcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIFNlY3VyZVZhbHVlUHJlcHJvY2Vzc2luZ1J1bGVcbiAqIEBwcm9wZXJ0eSB7UmVnRXhwfSBwYXR0ZXJuIFRoZSBwYXJzZWQgcGF0dGVybiB3aGljaCBpcyBnb2luZyB0byBiZSB1c2VkIGZvciByZXBsYWNlbWVudFxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtyZXBsYWNlcl0gVGhlIHJlcGxhY2VyIHZhbHVlIHRvIHVzZS4gQnkgZGVmYXVsdFxuICogZXF1YWxzIHRvIGBERUZBVUxUX1NFQ1VSRV9SRVBMQUNFUmBcbiAqL1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLGdCQUFnQixHQUFHLFlBQXpCOztBQUVBLE1BQU1DLHdCQUFOLENBQStCO0VBQzdCQyxXQUFXLEdBQUc7SUFDWixLQUFLQyxNQUFMLEdBQWMsRUFBZDtFQUNEOztFQU1RLElBQUxDLEtBQUssR0FBRztJQUNWLE9BQU8sS0FBS0QsTUFBWjtFQUNEOztFQVVERSxTQUFTLENBQUNDLElBQUQsRUFBTztJQUNkLElBQUlDLE9BQUo7SUFDQSxJQUFJQyxRQUFRLEdBQUdSLGdCQUFmO0lBQ0EsSUFBSVMsS0FBSyxHQUFHLENBQUMsR0FB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