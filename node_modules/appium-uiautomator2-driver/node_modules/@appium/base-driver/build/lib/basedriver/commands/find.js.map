{"version":3,"file":"find.js","names":["FindMixin","Base","FindCommands","findElement","strategy","selector","findElOrElsWithProcessing","findElements","findElementFromElement","elementId","findElementsFromElement","findElOrEls","mult","context","errors","NotImplementedError","getPageSource","validateLocatorStrategy","err","opts","printPageSourceOnFindFailure","src","log","debug","message"],"sources":["../../../../lib/basedriver/commands/find.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\n/* eslint-disable require-await */\n// @ts-check\nimport {errors} from '../../protocol';\n\n/**\n *\n * @param {EventBase} Base\n * @returns {FindBase}\n */\nexport function FindMixin(Base) {\n  /**\n   * @implements {IFindCommands}\n   */\n  class FindCommands extends Base {\n    /**\n     *\n     * @returns {Promise<Element>}\n     */\n    async findElement(strategy, selector) {\n      return await this.findElOrElsWithProcessing(strategy, selector, false);\n    }\n\n    /**\n     *\n     * @returns {Promise<Element[]>}\n     */\n    async findElements(strategy, selector) {\n      return await this.findElOrElsWithProcessing(strategy, selector, true);\n    }\n\n    /**\n     *\n     * @returns {Promise<Element>}\n     */\n    async findElementFromElement(strategy, selector, elementId) {\n      return await this.findElOrElsWithProcessing(strategy, selector, false, elementId);\n    }\n\n    /**\n     *\n     * @returns {Promise<Element[]>}\n     */\n    async findElementsFromElement(strategy, selector, elementId) {\n      return await this.findElOrElsWithProcessing(strategy, selector, true, elementId);\n    }\n    // Override the following function for your own driver, and the rest is taken\n    // care of!\n    // Returns an object which adheres to the way the JSON Wire Protocol represents elements:\n    // { ELEMENT: # }    eg: { ELEMENT: 3 }  or { ELEMENT: 1.023 }\n    /**\n     * @template {boolean} Mult\n     * @param {string} strategy\n     * @param {string} selector\n     * @param {Mult} mult\n     * @param {string} [context]\n     * @returns {Promise<Mult extends true ? Element[] : Element>}\n     */\n    async findElOrEls(strategy, selector, mult, context) {\n      throw new errors.NotImplementedError('Not implemented yet for find.');\n    }\n\n    /**\n     * @returns {Promise<string>}\n     */\n    async getPageSource() {\n      throw new errors.NotImplementedError('Not implemented yet for find.');\n    }\n    /**\n     * @template {boolean} Mult\n     * @param {string} strategy\n     * @param {string} selector\n     * @param {Mult} mult\n     * @param {string} [context]\n     * @returns {Promise<Mult extends true ? Element[] : Element>}\n     */\n    async findElOrElsWithProcessing(strategy, selector, mult, context) {\n      this.validateLocatorStrategy(strategy);\n      try {\n        return await this.findElOrEls(strategy, selector, mult, context);\n      } catch (err) {\n        if (this.opts.printPageSourceOnFindFailure) {\n          const src = await this.getPageSource();\n          this.log.debug(`Error finding element${mult ? 's' : ''}: ${err.message}`);\n          this.log.debug(`Page source requested through 'printPageSourceOnFindFailure':`);\n          this.log.debug(src);\n        }\n        // still want the error to occur\n        throw err;\n      }\n    }\n  }\n\n  return FindCommands;\n}\n\n/**\n * @typedef {import('@appium/types').Element} Element\n * @typedef {import('@appium/types').FindCommands} IFindCommands\n * @typedef {import('./event').EventBase} EventBase\n * @typedef {import('../driver').BaseDriverBase<import('@appium/types').TimeoutCommands & import('@appium/types').EventCommands & IFindCommands>} FindBase\n */\n"],"mappings":";;;;;;;;;AAGA;;AAOO,SAASA,SAAT,CAAmBC,IAAnB,EAAyB;EAI9B,MAAMC,YAAN,SAA2BD,IAA3B,CAAgC;IAKb,MAAXE,WAAW,CAACC,QAAD,EAAWC,QAAX,EAAqB;MACpC,OAAO,MAAM,KAAKC,yBAAL,CAA+BF,QAA/B,EAAyCC,QAAzC,EAAmD,KAAnD,CAAb;IACD;;IAMiB,MAAZE,YAAY,CAACH,QAAD,EAAWC,QAAX,EAAqB;MACrC,OAAO,MAAM,KAAKC,yBAAL,CAA+BF,QAA/B,EAAyCC,QAAzC,EAAmD,IAAnD,CAAb;IACD;;IAM2B,MAAtBG,sBAAsB,CAACJ,QAAD,EAAWC,QAAX,EAAqBI,SAArB,EAAgC;MAC1D,OAAO,MAAM,KAAKH,yBAAL,CAA+BF,QAA/B,EAAyCC,QAAzC,EAAmD,KAAnD,EAA0DI,SAA1D,CAAb;IACD;;IAM4B,MAAvBC,uBAAuB,CAACN,QAAD,EAAWC,QAAX,EAAqBI,SAArB,EAAgC;MAC3D,OAAO,MAAM,KAAKH,yBAAL,CAA+BF,QAA/B,EAAyCC,QAAzC,EAAmD,IAAnD,EAAyDI,SAAzD,CAAb;IACD;;IAagB,MAAXE,WAAW,CAACP,QAAD,EAAWC,QAAX,EAAqBO,IAArB,EAA2BC,OAA3B,EAAoC;MACnD,MAAM,IAAIC,gBAAA,CAAOC,mBAAX,CAA+B,+BAA/B,CAAN;IACD;;IAKkB,MAAbC,aAAa,GAAG;MACpB,MAAM,IAAIF,gBAAA,CAAOC,mBAAX,CAA+B,+BAA/B,CAAN;IACD;;IAS8B,MAAzBT,yBAAyB,CAACF,QAAD,EAAWC,QAAX,EAAqBO,IAArB,EAA2BC,OAA3B,EAAoC;MACjE,KAAKI,uBAAL,CAA6Bb,QAA7B;;MACA,IAAI;QACF,OAAO,MAAM,KAAKO,WAAL,CAAiBP,QAAjB,EAA2BC,QAA3B,EAAqCO,IAArC,EAA2CC,OAA3C,CAAb;MACD,CAFD,CAEE,OAAOK,GAAP,EAAY;QACZ,IAAI,KAAKC,IAAL,CAAUC,4BAAd,EAA4C;UAC1C,MAAMC,GAAG,GAAG,MAAM,KAAKL,aAAL,EAAlB;UACA,KAAKM,GAAL,CAASC,KAAT,CAAgB,wBAAuBX,IAAI,GAAG,GAAH,GAAS,EAAG,KAAIM,GAAG,CAACM,OAAQ,EAAvE;UACA,KAAKF,GAAL,CAASC,KAAT,CAAgB,+DAAhB;UACA,KAAKD,GAAL,CAASC,KAAT,CAAeF,GAAf;QACD;;QAED,MAAMH,GAAN;MACD;IACF;;EA5E6B;;EA+EhC,OAAOhB,YAAP;AACD"}