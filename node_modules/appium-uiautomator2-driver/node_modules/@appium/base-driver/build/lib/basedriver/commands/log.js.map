{"version":3,"file":"log.js","names":["LogMixin","Base","LogCommands","constructor","args","supportedLogTypes","getLogTypes","log","debug","_","keys","getLog","logType","includes","logsTypesWithDescriptions","mapValues","Error","JSON","stringify","getter"],"sources":["../../../../lib/basedriver/commands/log.js"],"sourcesContent":["/* eslint-disable require-await */\n// @ts-check\n\nimport _ from 'lodash';\n\n/**\n *\n * @param {FindBase} Base\n * @returns {LogBase}\n */\nexport function LogMixin(Base) {\n  /**\n   * @implements {ILogCommands}\n   */\n  class LogCommands extends Base {\n    constructor(...args) {\n      super(...args);\n      /** @type {Record<string, LogType<Driver>>} */\n      this.supportedLogTypes = this.supportedLogTypes ?? {};\n    }\n\n    async getLogTypes() {\n      this.log.debug('Retrieving supported log types');\n      return _.keys(this.supportedLogTypes);\n    }\n\n    /**\n     * @this {Driver}\n     * @param {string} logType\n     */\n    async getLog(logType) {\n      this.log.debug(`Retrieving '${logType}' logs`);\n\n      if (!(await this.getLogTypes()).includes(logType)) {\n        const logsTypesWithDescriptions = _.mapValues(this.supportedLogTypes, 'description');\n        throw new Error(\n          `Unsupported log type '${logType}'. ` +\n            `Supported types: ${JSON.stringify(logsTypesWithDescriptions)}`\n        );\n      }\n\n      return await this.supportedLogTypes[logType].getter(this);\n    }\n  }\n  return LogCommands;\n}\n\n/**\n * @typedef {import('@appium/types').LogCommands} ILogCommands\n * @typedef {import('@appium/types').Driver} Driver\n * @typedef {import('./find').FindBase} FindBase\n * @typedef {import('../driver').BaseDriverBase<import('@appium/types').TimeoutCommands & import('@appium/types').EventCommands & import('@appium/types').FindCommands & ILogCommands>} LogBase\n */\n\n/**\n * @template T\n * @typedef {import('@appium/types').LogType<T>} LogType\n */\n"],"mappings":";;;;;;;;;AAGA;;;;AAOO,SAASA,QAAT,CAAkBC,IAAlB,EAAwB;EAI7B,MAAMC,WAAN,SAA0BD,IAA1B,CAA+B;IAC7BE,WAAW,CAAC,GAAGC,IAAJ,EAAU;MACnB,MAAM,GAAGA,IAAT;MAEA,KAAKC,iBAAL,GAAyB,KAAKA,iBAAL,IAA0B,EAAnD;IACD;;IAEgB,MAAXC,WAAW,GAAG;MAClB,KAAKC,GAAL,CAASC,KAAT,CAAe,gCAAf;MACA,OAAOC,eAAA,CAAEC,IAAF,CAAO,KAAKL,iBAAZ,CAAP;IACD;;IAMW,MAANM,MAAM,CAACC,OAAD,EAAU;MACpB,KAAKL,GAAL,CAASC,KAAT,CAAgB,eAAcI,OAAQ,QAAtC;;MAEA,IAAI,CAAC,CAAC,MAAM,KAAKN,WAAL,EAAP,EAA2BO,QAA3B,CAAoCD,OAApC,CAAL,EAAmD;QACjD,MAAME,yBAAyB,GAAGL,eAAA,CAAEM,SAAF,CAAY,KAAKV,iBAAjB,EAAoC,aAApC,CAAlC;;QACA,MAAM,IAAIW,KAAJ,CACH,yBAAwBJ,OAAQ,KAAjC,GACG,oBAAmBK,IAAI,CAACC,SAAL,CAAeJ,yBAAf,CAA0C,EAF5D,CAAN;MAID;;MAED,OAAO,MAAM,KAAKT,iBAAL,CAAuBO,OAAvB,EAAgCO,MAAhC,CAAuC,IAAvC,CAAb;IACD;;EA5B4B;;EA8B/B,OAAOjB,WAAP;AACD"}