"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TimeoutMixin = TimeoutMixin;

require("source-map-support/register");

var _asyncbox = require("asyncbox");

var _lodash = _interopRequireDefault(require("lodash"));

var _support = require("@appium/support");

var _protocol = require("../../protocol");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const MIN_TIMEOUT = 0;

function TimeoutMixin(Base) {
  class TimeoutCommands extends Base {
    async timeouts(type, ms, script, pageLoad, implicit) {
      if (_support.util.hasValue(type) && _support.util.hasValue(ms)) {
        this.log.debug(`MJSONWP timeout arguments: ${JSON.stringify({
          type,
          ms
        })}}`);

        switch (type) {
          case 'command':
            await this.newCommandTimeout(ms);
            return;

          case 'implicit':
            await this.implicitWaitMJSONWP(ms);
            return;

          case 'page load':
            await this.pageLoadTimeoutMJSONWP(ms);
            return;

          case 'script':
            await this.scriptTimeoutMJSONWP(ms);
            return;

          default:
            throw new Error(`'${type}' type is not supported for MJSONWP timeout`);
        }
      }

      this.log.debug(`W3C timeout argument: ${JSON.stringify({
        script,
        pageLoad,
        implicit
      })}}`);

      if (_support.util.hasValue(script)) {
        await this.scriptTimeoutW3C(script);
      }

      if (_support.util.hasValue(pageLoad)) {
        await this.pageLoadTimeoutW3C(pageLoad);
      }

      if (_support.util.hasValue(implicit)) {
        await this.implicitWaitW3C(implicit);
      }
    }

    async getTimeouts() {
      return {
        command: this.newCommandTimeoutMs,
        implicit: this.implicitWaitMs
      };
    }

    async implicitWaitW3C(ms) {
      await this.implicitWait(ms);
    }

    async implicitWaitMJSONWP(ms) {
      await this.implicitWait(ms);
    }

    async implicitWait(ms) {
      await this.setImplicitWait(this.parseTimeoutArgument(ms));
    }

    async pageLoadTimeoutW3C(ms) {
      throw new _protocol.errors.NotImplementedError('Not implemented yet for pageLoad.');
    }

    async pageLoadTimeoutMJSONWP(ms) {
      throw new _protocol.errors.NotImplementedError('Not implemented yet for pageLoad.');
    }

    async scriptTimeoutW3C(ms) {
      throw new _protocol.errors.NotImplementedError('Not implemented yet for script.');
    }

    async scriptTimeoutMJSONWP(ms) {
      throw new _protocol.errors.NotImplementedError('Not implemented yet for script.');
    }

    async newCommandTimeout(ms) {
      this.setNewCommandTimeout(this.parseTimeoutArgument(ms));
    }

    setImplicitWait(ms) {
      this.implicitWaitMs = ms;
      this.log.debug(`Set implicit wait to ${ms}ms`);

      if (this.managedDrivers && this.managedDrivers.length) {
        this.log.debug('Setting implicit wait on managed drivers');

        for (let driver of this.managedDrivers) {
          if (_lodash.default.isFunction(driver.setImplicitWait)) {
            driver.setImplicitWait(ms);
          }
        }
      }
    }

    setNewCommandTimeout(ms) {
      this.newCommandTimeoutMs = ms;
      this.log.debug(`Set new command timeout to ${ms}ms`);

      if (this.managedDrivers && this.managedDrivers.length) {
        this.log.debug('Setting new command timeout on managed drivers');

        for (let driver of this.managedDrivers) {
          if (_lodash.default.isFunction(driver.setNewCommandTimeout)) {
            driver.setNewCommandTimeout(ms);
          }
        }
      }
    }

    async implicitWaitForCondition(condFn) {
      this.log.debug(`Waiting up to ${this.implicitWaitMs} ms for condition`);

      let wrappedCondFn = async (...args) => {
        await this.clearNewCommandTimeout();
        return await condFn(...args);
      };

      return await (0, _asyncbox.waitForCondition)(wrappedCondFn, {
        waitMs: this.implicitWaitMs,
        intervalMs: 500,
        logger: this.log
      });
    }

    parseTimeoutArgument(ms) {
      let duration = parseInt(ms, 10);

      if (_lodash.default.isNaN(duration) || duration < MIN_TIMEOUT) {
        throw new _protocol.errors.UnknownError(`Invalid timeout value '${ms}'`);
      }

      return duration;
    }

  }

  return TimeoutCommands;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNSU5fVElNRU9VVCIsIlRpbWVvdXRNaXhpbiIsIkJhc2UiLCJUaW1lb3V0Q29tbWFuZHMiLCJ0aW1lb3V0cyIsInR5cGUiLCJtcyIsInNjcmlwdCIsInBhZ2VMb2FkIiwiaW1wbGljaXQiLCJ1dGlsIiwiaGFzVmFsdWUiLCJsb2ciLCJkZWJ1ZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJuZXdDb21tYW5kVGltZW91dCIsImltcGxpY2l0V2FpdE1KU09OV1AiLCJwYWdlTG9hZFRpbWVvdXRNSlNPTldQIiwic2NyaXB0VGltZW91dE1KU09OV1AiLCJFcnJvciIsInNjcmlwdFRpbWVvdXRXM0MiLCJwYWdlTG9hZFRpbWVvdXRXM0MiLCJpbXBsaWNpdFdhaXRXM0MiLCJnZXRUaW1lb3V0cyIsImNvbW1hbmQiLCJuZXdDb21tYW5kVGltZW91dE1zIiwiaW1wbGljaXRXYWl0TXMiLCJpbXBsaWNpdFdhaXQiLCJzZXRJbXBsaWNpdFdhaXQiLCJwYXJzZVRpbWVvdXRBcmd1bWVudCIsImVycm9ycyIsIk5vdEltcGxlbWVudGVkRXJyb3IiLCJzZXROZXdDb21tYW5kVGltZW91dCIsIm1hbmFnZWREcml2ZXJzIiwibGVuZ3RoIiwiZHJpdmVyIiwiXyIsImlzRnVuY3Rpb24iLCJpbXBsaWNpdFdhaXRGb3JDb25kaXRpb24iLCJjb25kRm4iLCJ3cmFwcGVkQ29uZEZuIiwiYXJncyIsImNsZWFyTmV3Q29tbWFuZFRpbWVvdXQiLCJ3YWl0Rm9yQ29uZGl0aW9uIiwid2FpdE1zIiwiaW50ZXJ2YWxNcyIsImxvZ2dlciIsImR1cmF0aW9uIiwicGFyc2VJbnQiLCJpc05hTiIsIlVua25vd25FcnJvciJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9iYXNlZHJpdmVyL2NvbW1hbmRzL3RpbWVvdXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLWNoZWNrXG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG4vKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWF3YWl0ICovXG5pbXBvcnQge3dhaXRGb3JDb25kaXRpb259IGZyb20gJ2FzeW5jYm94JztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQge3V0aWx9IGZyb20gJ0BhcHBpdW0vc3VwcG9ydCc7XG5pbXBvcnQge2Vycm9yc30gZnJvbSAnLi4vLi4vcHJvdG9jb2wnO1xuXG5jb25zdCBNSU5fVElNRU9VVCA9IDA7XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoJy4uL2RyaXZlcicpLkJhc2VEcml2ZXJCYXNlfSBCYXNlXG4gKiBAcmV0dXJucyB7VGltZW91dEJhc2V9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBUaW1lb3V0TWl4aW4oQmFzZSkge1xuICAvKipcbiAgICogQGltcGxlbWVudHMge0lUaW1lb3V0Q29tbWFuZHN9XG4gICAqL1xuICBjbGFzcyBUaW1lb3V0Q29tbWFuZHMgZXh0ZW5kcyBCYXNlIHtcbiAgICBhc3luYyB0aW1lb3V0cyh0eXBlLCBtcywgc2NyaXB0LCBwYWdlTG9hZCwgaW1wbGljaXQpIHtcbiAgICAgIGlmICh1dGlsLmhhc1ZhbHVlKHR5cGUpICYmIHV0aWwuaGFzVmFsdWUobXMpKSB7XG4gICAgICAgIHRoaXMubG9nLmRlYnVnKGBNSlNPTldQIHRpbWVvdXQgYXJndW1lbnRzOiAke0pTT04uc3RyaW5naWZ5KHt0eXBlLCBtc30pfX1gKTtcblxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICBjYXNlICdjb21tYW5kJzpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubmV3Q29tbWFuZFRpbWVvdXQobXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIGNhc2UgJ2ltcGxpY2l0JzpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW1wbGljaXRXYWl0TUpTT05XUChtcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgY2FzZSAncGFnZSBsb2FkJzpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGFnZUxvYWRUaW1lb3V0TUpTT05XUChtcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgY2FzZSAnc2NyaXB0JzpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2NyaXB0VGltZW91dE1KU09OV1AobXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke3R5cGV9JyB0eXBlIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIE1KU09OV1AgdGltZW91dGApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIE90aGVyd2lzZSBhc3N1bWUgaXQgaXMgVzNDIHByb3RvY29sXG4gICAgICB0aGlzLmxvZy5kZWJ1ZyhcbiAgICAgICAgYFczQyB0aW1lb3V0IGFyZ3VtZW50OiAke0pTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBzY3JpcHQsXG4gICAgICAgICAgcGFnZUxvYWQsXG4gICAgICAgICAgaW1wbGljaXQsXG4gICAgICAgIH0pfX1gXG4gICAgICApO1xuICAgICAgaWYgKHV0aWwuaGFzVmFsdWUoc2NyaXB0KSkge1xuICAgICAgICBhd2FpdCB0aGlzLnNjcmlwdFRpbWVvdXRXM0Moc2NyaXB0KTtcbiAgICAgIH1cbiAgICAgIGlmICh1dGlsLmhhc1ZhbHVlKHBhZ2VMb2FkKSkge1xuICAgICAgICBhd2FpdCB0aGlzLnBhZ2VMb2FkVGltZW91dFczQyhwYWdlTG9hZCk7XG4gICAgICB9XG4gICAgICBpZiAodXRpbC5oYXNWYWx1ZShpbXBsaWNpdCkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5pbXBsaWNpdFdhaXRXM0MoaW1wbGljaXQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldFRpbWVvdXRzKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29tbWFuZDogdGhpcy5uZXdDb21tYW5kVGltZW91dE1zLFxuICAgICAgICBpbXBsaWNpdDogdGhpcy5pbXBsaWNpdFdhaXRNcyxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gaW1wbGljaXRcbiAgICBhc3luYyBpbXBsaWNpdFdhaXRXM0MobXMpIHtcbiAgICAgIGF3YWl0IHRoaXMuaW1wbGljaXRXYWl0KG1zKTtcbiAgICB9XG5cbiAgICBhc3luYyBpbXBsaWNpdFdhaXRNSlNPTldQKG1zKSB7XG4gICAgICBhd2FpdCB0aGlzLmltcGxpY2l0V2FpdChtcyk7XG4gICAgfVxuXG4gICAgYXN5bmMgaW1wbGljaXRXYWl0KG1zKSB7XG4gICAgICBhd2FpdCB0aGlzLnNldEltcGxpY2l0V2FpdCh0aGlzLnBhcnNlVGltZW91dEFyZ3VtZW50KG1zKSk7XG4gICAgfVxuXG4gICAgLy8gcGFnZUxvYWRcbiAgICBhc3luYyBwYWdlTG9hZFRpbWVvdXRXM0MobXMpIHtcbiAgICAgIHRocm93IG5ldyBlcnJvcnMuTm90SW1wbGVtZW50ZWRFcnJvcignTm90IGltcGxlbWVudGVkIHlldCBmb3IgcGFnZUxvYWQuJyk7XG4gICAgfVxuXG4gICAgYXN5bmMgcGFnZUxvYWRUaW1lb3V0TUpTT05XUChtcykge1xuICAgICAgdGhyb3cgbmV3IGVycm9ycy5Ob3RJbXBsZW1lbnRlZEVycm9yKCdOb3QgaW1wbGVtZW50ZWQgeWV0IGZvciBwYWdlTG9hZC4nKTtcbiAgICB9XG5cbiAgICAvLyBzY3JpcHRcbiAgICBhc3luYyBzY3JpcHRUaW1lb3V0VzNDKG1zKSB7XG4gICAgICB0aHJvdyBuZXcgZXJyb3JzLk5vdEltcGxlbWVudGVkRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCB5ZXQgZm9yIHNjcmlwdC4nKTtcbiAgICB9XG5cbiAgICBhc3luYyBzY3JpcHRUaW1lb3V0TUpTT05XUChtcykge1xuICAgICAgdGhyb3cgbmV3IGVycm9ycy5Ob3RJbXBsZW1lbnRlZEVycm9yKCdOb3QgaW1wbGVtZW50ZWQgeWV0IGZvciBzY3JpcHQuJyk7XG4gICAgfVxuXG4gICAgLy8gY29tbWFuZFxuICAgIGFzeW5jIG5ld0NvbW1hbmRUaW1lb3V0KG1zKSB7XG4gICAgICB0aGlzLnNldE5ld0NvbW1hbmRUaW1lb3V0KHRoaXMucGFyc2VUaW1lb3V0QXJndW1lbnQobXMpKTtcbiAgICB9XG5cbiAgICBzZXRJbXBsaWNpdFdhaXQobXMpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcmVxdWlyZS1hd2FpdFxuICAgICAgdGhpcy5pbXBsaWNpdFdhaXRNcyA9IG1zO1xuICAgICAgdGhpcy5sb2cuZGVidWcoYFNldCBpbXBsaWNpdCB3YWl0IHRvICR7bXN9bXNgKTtcbiAgICAgIGlmICh0aGlzLm1hbmFnZWREcml2ZXJzICYmIHRoaXMubWFuYWdlZERyaXZlcnMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMubG9nLmRlYnVnKCdTZXR0aW5nIGltcGxpY2l0IHdhaXQgb24gbWFuYWdlZCBkcml2ZXJzJyk7XG4gICAgICAgIGZvciAobGV0IGRyaXZlciBvZiB0aGlzLm1hbmFnZWREcml2ZXJzKSB7XG4gICAgICAgICAgaWYgKF8uaXNGdW5jdGlvbihkcml2ZXIuc2V0SW1wbGljaXRXYWl0KSkge1xuICAgICAgICAgICAgZHJpdmVyLnNldEltcGxpY2l0V2FpdChtcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2V0TmV3Q29tbWFuZFRpbWVvdXQobXMpIHtcbiAgICAgIHRoaXMubmV3Q29tbWFuZFRpbWVvdXRNcyA9IG1zO1xuICAgICAgdGhpcy5sb2cuZGVidWcoYFNldCBuZXcgY29tbWFuZCB0aW1lb3V0IHRvICR7bXN9bXNgKTtcbiAgICAgIGlmICh0aGlzLm1hbmFnZWREcml2ZXJzICYmIHRoaXMubWFuYWdlZERyaXZlcnMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMubG9nLmRlYnVnKCdTZXR0aW5nIG5ldyBjb21tYW5kIHRpbWVvdXQgb24gbWFuYWdlZCBkcml2ZXJzJyk7XG4gICAgICAgIGZvciAobGV0IGRyaXZlciBvZiB0aGlzLm1hbmFnZWREcml2ZXJzKSB7XG4gICAgICAgICAgaWYgKF8uaXNGdW5jdGlvbihkcml2ZXIuc2V0TmV3Q29tbWFuZFRpbWVvdXQpKSB7XG4gICAgICAgICAgICBkcml2ZXIuc2V0TmV3Q29tbWFuZFRpbWVvdXQobXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGltcGxpY2l0V2FpdEZvckNvbmRpdGlvbihjb25kRm4pIHtcbiAgICAgIHRoaXMubG9nLmRlYnVnKGBXYWl0aW5nIHVwIHRvICR7dGhpcy5pbXBsaWNpdFdhaXRNc30gbXMgZm9yIGNvbmRpdGlvbmApO1xuICAgICAgbGV0IHdyYXBwZWRDb25kRm4gPSBhc3luYyAoLi4uYXJncykgPT4ge1xuICAgICAgICAvLyByZXNldCBjb21tYW5kIHRpbWVvdXRcbiAgICAgICAgYXdhaXQgdGhpcy5jbGVhck5ld0NvbW1hbmRUaW1lb3V0KCk7XG5cbiAgICAgICAgcmV0dXJuIGF3YWl0IGNvbmRGbiguLi5hcmdzKTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gYXdhaXQgd2FpdEZvckNvbmRpdGlvbih3cmFwcGVkQ29uZEZuLCB7XG4gICAgICAgIHdhaXRNczogdGhpcy5pbXBsaWNpdFdhaXRNcyxcbiAgICAgICAgaW50ZXJ2YWxNczogNTAwLFxuICAgICAgICBsb2dnZXI6IHRoaXMubG9nLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcGFyc2VUaW1lb3V0QXJndW1lbnQobXMpIHtcbiAgICAgIGxldCBkdXJhdGlvbiA9IHBhcnNlSW50KG1zLCAxMCk7XG4gICAgICBpZiAoXy5pc05hTihkdXJhdGlvbikgfHwgZHVyYXRpb24gPCBNSU5fVElNRU9VVCkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JzLlVua25vd25FcnJvcihgSW52YWxpZCB0aW1lb3V0IHZhbHVlICcke21zfSdgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkdXJhdGlvbjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gVGltZW91dENvbW1hbmRzO1xufVxuXG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoJ0BhcHBpdW0vdHlwZXMnKS5UaW1lb3V0Q29tbWFuZHN9IElUaW1lb3V0Q29tbWFuZHNcbiAqIEB0eXBlZGVmIHtpbXBvcnQoJy4uL2RyaXZlcicpLkJhc2VEcml2ZXJCYXNlPElUaW1lb3V0Q29tbWFuZHM+fSBUaW1lb3V0QmFzZVxuICovXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUlBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsV0FBVyxHQUFHLENBQXBCOztBQU1PLFNBQVNDLFlBQVQsQ0FBc0JDLElBQXRCLEVBQTRCO0VBSWpDLE1BQU1DLGVBQU4sU0FBOEJELElBQTlCLENBQW1DO0lBQ25CLE1BQVJFLFFBQVEsQ0FBQ0MsSUFBRCxFQUFPQyxFQUFQLEVBQVdDLE1BQVgsRUFBbUJDLFFBQW5CLEVBQTZCQyxRQUE3QixFQUF1QztNQUNuRCxJQUFJQyxhQUFBLENBQUtDLFFBQUwsQ0FBY04sSUFBZCxLQUF1QkssYUFBQSxDQUFLQyxRQUFMLENBQWNMLEVBQWQsQ0FBM0IsRUFBOEM7UUFDNUMsS0FBS00sR0FBTCxDQUFTQyxLQUFULENBQWdCLDhCQUE2QkMsSUFBSSxDQUFDQyxTQUFMLENBQWU7VUFBQ1YsSUFBRDtVQUFPQztRQUFQLENBQWYsQ0FBMkIsR0FBeEU7O1FBRUEsUUFBUUQsSUFBUjtVQUNFLEtBQUssU0FBTDtZQUNFLE1BQU0sS0FBS1csaUJBQUwsQ0FBdUJWLEVBQXZCLENBQU47WUFDQTs7VUFDRixLQUFLLFVBQUw7WUFDRSxNQUFNLEtBQUtXLG1CQUFMLENBQXlCWCxFQUF6QixDQUFOO1lBQ0E7O1VBQ0YsS0FBSyxXQUFMO1lBQ0UsTUFBTSxLQUFLWSxzQkFBTCxDQUE0QlosRUFBNUIsQ0FBTjtZQUNBOztVQUNGLEtBQUssUUFBTDtZQUNFLE1BQU0sS0FBS2Esb0JBQUwsQ0FBMEJiLEVBQTFCLENBQU47WUFDQTs7VUFDRjtZQUNFLE1BQU0sSUFBSWMsS0FBSixDQUFXLElBQUdmLElBQUssNkNBQW5CLENBQU47UUFkSjtNQWdCRDs7TUFHRCxLQUFLTyxHQUFMLENBQVNDLEtBQVQsQ0FDRyx5QkFBd0JDLElBQUksQ0FB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