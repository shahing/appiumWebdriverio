"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.mkdocsBuild = mkdocsBuild;
exports.mkdocsServe = mkdocsServe;
exports.verifyMkdocs = verifyMkdocs;

require("source-map-support/register");

var _teen_process = require("teen_process");

const MKDOCS_VER_STR = 'version 1.';

async function verifyMkdocs() {
  try {
    const {
      stdout
    } = await (0, _teen_process.exec)('mkdocs', ['-V']);

    if (!stdout.includes(MKDOCS_VER_STR)) {
      throw new Error('version mismatch');
    }
  } catch (err) {
    throw new Error(`Could not verify mkdocs 1.x is available. Make sure it's installed ` + `and on your path. Specific error: ${err}`);
  }
}

async function mkdocsBuild(configPath, outputDir, theme = 'mkdocs') {
  await verifyMkdocs();
  await (0, _teen_process.exec)('mkdocs', ['build', '-f', configPath, '-t', theme, '-d', outputDir]);
}

async function mkdocsServe(configPath) {
  await verifyMkdocs();
  const proc = new _teen_process.SubProcess('mkdocs', ['serve', '-f', configPath]);
  await proc.start();
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNS0RPQ1NfVkVSX1NUUiIsInZlcmlmeU1rZG9jcyIsInN0ZG91dCIsImV4ZWMiLCJpbmNsdWRlcyIsIkVycm9yIiwiZXJyIiwibWtkb2NzQnVpbGQiLCJjb25maWdQYXRoIiwib3V0cHV0RGlyIiwidGhlbWUiLCJta2RvY3NTZXJ2ZSIsInByb2MiLCJTdWJQcm9jZXNzIiwic3RhcnQiXSwic291cmNlcyI6WyIuLi8uLi9saWIvbWtkb2NzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7ZXhlYywgU3ViUHJvY2Vzc30gZnJvbSAndGVlbl9wcm9jZXNzJztcblxuY29uc3QgTUtET0NTX1ZFUl9TVFIgPSAndmVyc2lvbiAxLic7XG5cbi8qKlxuICogUnVuIGEgdmVyc2lvbiBjaGVjayBvbiB0aGUgc3lzdGVtLWluc3RhbGxlZCBta2RvY3MgdG8gbWFrZSBzdXJlIGl0IGlzIHNldCB1cFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5TWtkb2NzKCkge1xuICB0cnkge1xuICAgIGNvbnN0IHtzdGRvdXR9ID0gYXdhaXQgZXhlYygnbWtkb2NzJywgWyctViddKTtcbiAgICBpZiAoIXN0ZG91dC5pbmNsdWRlcyhNS0RPQ1NfVkVSX1NUUikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndmVyc2lvbiBtaXNtYXRjaCcpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYENvdWxkIG5vdCB2ZXJpZnkgbWtkb2NzIDEueCBpcyBhdmFpbGFibGUuIE1ha2Ugc3VyZSBpdCdzIGluc3RhbGxlZCBgICtcbiAgICAgICAgYGFuZCBvbiB5b3VyIHBhdGguIFNwZWNpZmljIGVycm9yOiAke2Vycn1gXG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIFJ1biAnbWtkb2NzIGJ1aWxkJyBvbiBhIHByb2plY3RcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29uZmlnUGF0aCBwYXRoIHRvIG1rZG9jcyBjb25maWcgeW1sXG4gKiBAcGFyYW0ge3N0cmluZ30gb3V0cHV0RGlyIGRpcmVjdG9yeSBta2RvY3Mgc2hvdWxkIGJ1aWxkIGludG9cbiAqIEBwYXJhbSB7P3N0cmluZ30gdGhlbWUgdGhlbWUgbmFtZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWtkb2NzQnVpbGQoY29uZmlnUGF0aCwgb3V0cHV0RGlyLCB0aGVtZSA9ICdta2RvY3MnKSB7XG4gIGF3YWl0IHZlcmlmeU1rZG9jcygpO1xuICBhd2FpdCBleGVjKCdta2RvY3MnLCBbJ2J1aWxkJywgJy1mJywgY29uZmlnUGF0aCwgJy10JywgdGhlbWUsICctZCcsIG91dHB1dERpcl0pO1xufVxuXG4vKipcbiAqIFJ1biAnbWtkb2NzIHNlcnZlJyBvbiBhIHByb2plY3RcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29uZmlnUGF0aCBwYXRoIHRvIG1rZG9jcyBjb25maWcgeW1sXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBta2RvY3NTZXJ2ZShjb25maWdQYXRoKSB7XG4gIGF3YWl0IHZlcmlmeU1rZG9jcygpO1xuICBjb25zdCBwcm9jID0gbmV3IFN1YlByb2Nlc3MoJ21rZG9jcycsIFsnc2VydmUnLCAnLWYnLCBjb25maWdQYXRoXSk7XG4gIGF3YWl0IHByb2Muc3RhcnQoKTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7QUFFQSxNQUFNQSxjQUFjLEdBQUcsWUFBdkI7O0FBS08sZUFBZUMsWUFBZixHQUE4QjtFQUNuQyxJQUFJO0lBQ0YsTUFBTTtNQUFDQztJQUFELElBQVcsTUFBTSxJQUFBQyxrQkFBQSxFQUFLLFFBQUwsRUFBZSxDQUFDLElBQUQsQ0FBZixDQUF2Qjs7SUFDQSxJQUFJLENBQUNELE1BQU0sQ0FBQ0UsUUFBUCxDQUFnQkosY0FBaEIsQ0FBTCxFQUFzQztNQUNwQyxNQUFNLElBQUlLLEtBQUosQ0FBVSxrQkFBVixDQUFOO0lBQ0Q7RUFDRixDQUxELENBS0UsT0FBT0MsR0FBUCxFQUFZO0lBQ1osTUFBTSxJQUFJRCxLQUFKLENBQ0gscUVBQUQsR0FDRyxxQ0FBb0NDLEdBQUksRUFGdkMsQ0FBTjtFQUlEO0FBQ0Y7O0FBU00sZUFBZUMsV0FBZixDQUEyQkMsVUFBM0IsRUFBdUNDLFNBQXZDLEVBQWtEQyxLQUFLLEdBQUcsUUFBMUQsRUFBb0U7RUFDekUsTUFBTVQsWUFBWSxFQUFsQjtFQUNBLE1BQU0sSUFBQUUsa0JBQUEsRUFBSyxRQUFMLEVBQWUsQ0FBQyxPQUFELEVBQVUsSUFBVixFQUFnQkssVUFBaEIsRUFBNEIsSUFBNUIsRUFBa0NFLEtBQWxDLEVBQXlDLElBQXpDLEVBQStDRCxTQUEvQyxDQUFmLENBQU47QUFDRDs7QUFPTSxlQUFlRSxXQUFmLENBQTJCSCxVQUEzQixFQUF1QztFQUM1QyxNQUFNUCxZQUFZLEVBQWxCO0VBQ0EsTUFBTVcsSUFBSSxHQUFHLElBQUlDLHdCQUFKLENBQWUsUUFBZixFQUF5QixDQUFDLE9BQUQsRUFBVSxJQUFWLEVBQWdCTCxVQUFoQixDQUF6QixDQUFiO0VBQ0EsTUFBTUksSUFBSSxDQUFDRSxLQUFMLEVBQU47QUFDRCJ9